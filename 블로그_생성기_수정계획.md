# ğŸ”§ AI ë¸”ë¡œê·¸ ìƒì„±ê¸° ìˆ˜ì • ê³„íšì„œ

> **ëª©ì :** ê¸°ì¡´ ìë™ ë¸”ë¡œê·¸ ìƒì„±ê¸°ë¥¼ ê¸°íšì„œ ë‚´ìš©ì— ë§ì¶° ê³ ë„í™”
> **ëŒ€ìƒ:** ë‹¤ë¥¸ AI ë˜ëŠ” ê°œë°œìê°€ ì´ ë¬¸ì„œë¥¼ ë³´ê³  êµ¬í˜„
> **ì‘ì„±ì¼:** 2025-11-01

---

## ğŸ“‹ ëª©ì°¨

1. [í˜„ì¬ ì‹œìŠ¤í…œ ë¶„ì„](#1-í˜„ì¬-ì‹œìŠ¤í…œ-ë¶„ì„)
2. [ê¸°íšì„œ í•µì‹¬ ìš”êµ¬ì‚¬í•­](#2-ê¸°íšì„œ-í•µì‹¬-ìš”êµ¬ì‚¬í•­)
3. [ìˆ˜ì •ì´ í•„ìš”í•œ ë¶€ë¶„](#3-ìˆ˜ì •ì´-í•„ìš”í•œ-ë¶€ë¶„)
4. [ìƒì„¸ êµ¬í˜„ ê°€ì´ë“œ](#4-ìƒì„¸-êµ¬í˜„-ê°€ì´ë“œ)
5. [íŒŒì¼ë³„ ìˆ˜ì • ë‚´ì—­](#5-íŒŒì¼ë³„-ìˆ˜ì •-ë‚´ì—­)
6. [í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤](#6-í…ŒìŠ¤íŠ¸-ì‹œë‚˜ë¦¬ì˜¤)

---

## 1. í˜„ì¬ ì‹œìŠ¤í…œ ë¶„ì„

### ğŸ“‚ í˜„ì¬ íŒŒì¼ êµ¬ì¡°

```
ai-platform/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ auto-blog/
â”‚   â”‚   â””â”€â”€ page.tsx                    # ê´€ë¦¬ ëŒ€ì‹œë³´ë“œ
â”‚   â””â”€â”€ api/
â”‚       â”œâ”€â”€ auto-blog/
â”‚       â”‚   â”œâ”€â”€ generate/route.ts       # ìƒì„± API
â”‚       â”‚   â”œâ”€â”€ topics/route.ts         # ì£¼ì œ API
â”‚       â”‚   â”œâ”€â”€ history/route.ts        # ì´ë ¥ API
â”‚       â”‚   â””â”€â”€ manual/route.ts         # ìˆ˜ë™ ìƒì„±
â”‚       â””â”€â”€ cron/
â”‚           â””â”€â”€ auto-blog/route.ts      # Cron Job
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ auto-blog/
â”‚   â”‚   â”œâ”€â”€ topic-generator.ts          # ì£¼ì œ ìƒì„±
â”‚   â”‚   â”œâ”€â”€ content-generator.ts        # ì½˜í…ì¸  ìƒì„±
â”‚   â”‚   â”œâ”€â”€ image-generator.ts          # ì´ë¯¸ì§€ ìƒì„±
â”‚   â”‚   â”œâ”€â”€ blog-publisher.ts           # ë¸”ë¡œê·¸ ê²Œì‹œ
â”‚   â”‚   â””â”€â”€ prompt-templates.ts         # í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿
â”‚   â””â”€â”€ auto-blog-storage.ts            # Redis ì €ì¥
â””â”€â”€ vercel.json                          # Cron ì„¤ì •
```

### ğŸ” í˜„ì¬ ì‹œìŠ¤í…œì˜ íŠ¹ì§•

**ì¥ì :**
- âœ… ì™„ì „ ìë™í™” (Cron ê¸°ë°˜)
- âœ… ì£¼ì œ ìë™ ìƒì„±
- âœ… ì´ë¯¸ì§€ ìë™ ìƒì„±
- âœ… Redis ì €ì¥
- âœ… ê´€ë¦¬ ëŒ€ì‹œë³´ë“œ ì œê³µ

**í•œê³„:**
- âŒ AI ëª¨ë¸ ì„ íƒ ë¶ˆê°€ (Geminië§Œ ì‚¬ìš©)
- âŒ ê¸€ ê¸¸ì´ ì¡°ì ˆ ë¶ˆê°€
- âŒ ì œëª© ìë™ ìƒì„±ë§Œ ê°€ëŠ¥
- âŒ ì´ë¯¸ì§€ ìƒì„± ëª¨ë¸ ê³ ì •
- âŒ ë¹„ìš© ì •ë³´ ì—†ìŒ
- âŒ ë§ˆê° ì²˜ë¦¬(Finishing) ê¸°ëŠ¥ ì—†ìŒ
- âŒ API í‚¤ ì„¤ì • UI ì—†ìŒ

---

## 2. ê¸°íšì„œ í•µì‹¬ ìš”êµ¬ì‚¬í•­

### ğŸ¯ í•µì‹¬ ê¸°ëŠ¥ (ê¸°íšì„œ ê¸°ë°˜)

#### 2.1. BYOK (Bring Your Own Key)
```
ì‚¬ìš©ìê°€ ì§ì ‘ API í‚¤ë¥¼ ë“±ë¡í•˜ê³  ê´€ë¦¬
â†’ OpenAI, Anthropic (Claude), Google (Gemini) ë“±
â†’ í”„ë¡œê·¸ë¨ ê°œë°œìëŠ” ì¤‘ê°œ ìˆ˜ìˆ˜ë£Œ ì—†ìŒ
â†’ 100% íˆ¬ëª…í•œ ë¹„ìš© êµ¬ì¡°
```

#### 2.2. ë‹¤ì–‘í•œ AI ëª¨ë¸ ì„ íƒ
```
í…ìŠ¤íŠ¸ ìƒì„±:
- GPT-4 Turbo
- GPT-4o
- GPT-4o mini
- Claude 3.5 Sonnet
- Claude 3 Haiku
- Gemini 1.5 Pro
- Gemini 1.0 Flash (ë¬´ë£Œ)

ì´ë¯¸ì§€ ìƒì„±:
- DALL-E 3 (ê³ í’ˆì§ˆ, ê³ ë¹„ìš©)
- Stable Diffusion (ì €ë¹„ìš©)
```

#### 2.3. ì½˜í…ì¸  ë§ì¶¤í™”
```
âœ… í† í° ìˆ˜ ì§ì ‘ ì…ë ¥ â†’ ê¸€ ê¸¸ì´ ì œì–´
âœ… ì œëª© ì§ì ‘ ì…ë ¥ â†’ 100% ì‚¬ìš©ì í†µì œ
âœ… ì¹´í…Œê³ ë¦¬ ì„ íƒ
âœ… í‚¤ì›Œë“œ ì…ë ¥
```

#### 2.4. ì´ë¯¸ì§€ ì²˜ë¦¬
```
âœ… ì´ë¯¸ì§€ ìƒì„± ëª¨ë¸ ì„ íƒ
âœ… ì´ë¯¸ì§€ ê°œìˆ˜ ì„¤ì • (0~10ê°œ)
âœ… alt íƒœê·¸ ìë™ ìƒì„± (SEO ìµœì í™”)
âœ… ì´ë¯¸ì§€ ìœ„ì¹˜ ìë™ ë°°ì¹˜
```

#### 2.5. ë§ˆê° ì²˜ë¦¬ (Finishing)
```
âœ… Gemini APIë¡œ ìµœì¢… ë‹¤ë“¬ê¸°
âœ… ë¬¸ë§¥ ìì—°ìŠ¤ëŸ½ê²Œ ê°œì„ 
âœ… ê°ì„±ì  í‘œí˜„ ì¶”ê°€
âœ… ì„ íƒì  ê¸°ëŠ¥ (API í‚¤ ìˆì„ ë•Œë§Œ)
```

#### 2.6. íˆ¬ëª…í•œ ë¹„ìš© í‘œì‹œ
```
âœ… ì˜ˆìƒ ë¹„ìš© ì‹¤ì‹œê°„ ê³„ì‚°
âœ… ëª¨ë¸ë³„ ë¹„ìš© ë¹„êµ
âœ… ì´ ë¹„ìš© í‘œì‹œ
```

---

## 3. ìˆ˜ì •ì´ í•„ìš”í•œ ë¶€ë¶„

### ğŸ“Š ìš°ì„ ìˆœìœ„ë³„ ìˆ˜ì • í•­ëª©

#### ğŸ”´ High Priority (í•„ìˆ˜)

1. **API í‚¤ ì„¤ì • UI**
   - ì‚¬ìš©ìê°€ ì—¬ëŸ¬ AI ì„œë¹„ìŠ¤ì˜ API í‚¤ ì…ë ¥/ì €ì¥
   - Redisì— ì•”í˜¸í™”í•˜ì—¬ ì €ì¥
   - ì„¤ì • í˜ì´ì§€ ì¶”ê°€

2. **AI ëª¨ë¸ ì„ íƒ ê¸°ëŠ¥**
   - í…ìŠ¤íŠ¸ ìƒì„± ëª¨ë¸ ì„ íƒ (GPT-4, Claude, Gemini ë“±)
   - ì´ë¯¸ì§€ ìƒì„± ëª¨ë¸ ì„ íƒ (DALL-E 3, SD)
   - ê° ëª¨ë¸ë³„ API í˜¸ì¶œ ë¡œì§

3. **ì½˜í…ì¸  ë§ì¶¤í™” UI**
   - ì œëª© ì§ì ‘ ì…ë ¥ í•„ë“œ
   - í† í° ìˆ˜ ì…ë ¥ (ê¸€ ê¸¸ì´ ì¡°ì ˆ)
   - ì¹´í…Œê³ ë¦¬ ì„ íƒ
   - í‚¤ì›Œë“œ ì…ë ¥

4. **ë¹„ìš© ê³„ì‚° ë° í‘œì‹œ**
   - ëª¨ë¸ë³„ ë‹¨ê°€ ì •ì˜
   - ì˜ˆìƒ ë¹„ìš© ì‹¤ì‹œê°„ ê³„ì‚°
   - ìƒì„± í›„ ì‹¤ì œ ë¹„ìš© í‘œì‹œ

#### ğŸŸ¡ Medium Priority (ì¤‘ìš”)

5. **ë§ˆê° ì²˜ë¦¬ (Finishing) ê¸°ëŠ¥**
   - Gemini APIë¡œ ìµœì¢… ë‹¤ë“¬ê¸°
   - ì„ íƒì  í™œì„±í™”

6. **ì´ë¯¸ì§€ alt íƒœê·¸ ìë™ ìƒì„±**
   - ì´ë¯¸ì§€ ë‚´ìš© ë¶„ì„ â†’ alt íƒœê·¸ ìƒì„±
   - SEO ìµœì í™”

7. **ì„¤ì • ì €ì¥ ë° ë¶ˆëŸ¬ì˜¤ê¸°**
   - ìì£¼ ì‚¬ìš©í•˜ëŠ” ì„¤ì • í”„ë¦¬ì…‹
   - ê¸°ë³¸ê°’ ì„¤ì •

#### ğŸŸ¢ Low Priority (ì„ íƒ)

8. **í†µê³„ ëŒ€ì‹œë³´ë“œ ê°•í™”**
   - ì´ ë¹„ìš© ì§‘ê³„
   - ëª¨ë¸ë³„ ì‚¬ìš© í†µê³„
   - ì›”ë³„ ë¹„ìš© ê·¸ë˜í”„

9. **ë‹¤ì–‘í•œ í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿**
   - ì—…ì¢…ë³„ í…œí”Œë¦¿ (ì™¸ì‹ì—…, IT, íŒ¨ì…˜ ë“±)
   - í†¤ ì•¤ ë§¤ë„ˆ ì„ íƒ

---

## 4. ìƒì„¸ êµ¬í˜„ ê°€ì´ë“œ

### ğŸ› ï¸ Phase 1: API í‚¤ ê´€ë¦¬ ì‹œìŠ¤í…œ

#### 4.1. ì„¤ì • UI ì¶”ê°€

**ìƒˆ íŒŒì¼:** `app/auto-blog/settings/page.tsx`

```typescript
'use client'
import { useState, useEffect } from 'react'
import { fetchWithAuth } from '@/lib/client-auth'

export default function SettingsPage() {
  const [apiKeys, setApiKeys] = useState({
    openai: '',
    anthropic: '',
    gemini: '',
    stabilityai: '',
  })

  const [saved, setSaved] = useState(false)

  // API í‚¤ ë¶ˆëŸ¬ì˜¤ê¸°
  useEffect(() => {
    async function loadKeys() {
      const res = await fetchWithAuth('/api/auto-blog/settings')
      const data = await res.json()
      setApiKeys(data.apiKeys || {})
    }
    loadKeys()
  }, [])

  // API í‚¤ ì €ì¥
  const handleSave = async () => {
    const res = await fetchWithAuth('/api/auto-blog/settings', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ apiKeys })
    })
    if (res.ok) {
      setSaved(true)
      setTimeout(() => setSaved(false), 3000)
    }
  }

  return (
    <div className="min-h-screen bg-gradient-to-br from-blue-900 to-gray-900 text-white p-8">
      <div className="max-w-3xl mx-auto space-y-8">
        <header>
          <h1 className="text-3xl font-bold">âš™ï¸ API í‚¤ ì„¤ì •</h1>
          <p className="text-gray-300 mt-2">
            ê° AI ì„œë¹„ìŠ¤ì—ì„œ ë°œê¸‰ë°›ì€ API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš”.
          </p>
        </header>

        <div className="bg-gray-800 rounded-lg p-6 space-y-6">
          {/* OpenAI */}
          <div>
            <label className="block text-sm font-semibold mb-2">
              ğŸ¤– OpenAI API Key (GPT-4, DALL-E 3)
            </label>
            <input
              type="password"
              value={apiKeys.openai}
              onChange={(e) => setApiKeys({ ...apiKeys, openai: e.target.value })}
              placeholder="sk-..."
              className="w-full bg-gray-700 rounded px-4 py-2 text-white"
            />
            <p className="text-xs text-gray-400 mt-1">
              ë°œê¸‰: <a href="https://platform.openai.com/api-keys" target="_blank" className="text-blue-400 underline">platform.openai.com</a>
            </p>
          </div>

          {/* Anthropic */}
          <div>
            <label className="block text-sm font-semibold mb-2">
              ğŸ§  Anthropic API Key (Claude)
            </label>
            <input
              type="password"
              value={apiKeys.anthropic}
              onChange={(e) => setApiKeys({ ...apiKeys, anthropic: e.target.value })}
              placeholder="sk-ant-..."
              className="w-full bg-gray-700 rounded px-4 py-2 text-white"
            />
            <p className="text-xs text-gray-400 mt-1">
              ë°œê¸‰: <a href="https://console.anthropic.com/" target="_blank" className="text-blue-400 underline">console.anthropic.com</a>
            </p>
          </div>

          {/* Google Gemini */}
          <div>
            <label className="block text-sm font-semibold mb-2">
              âœ¨ Google Gemini API Key (ë¬´ë£Œ!)
            </label>
            <input
              type="password"
              value={apiKeys.gemini}
              onChange={(e) => setApiKeys({ ...apiKeys, gemini: e.target.value })}
              placeholder="AIza..."
              className="w-full bg-gray-700 rounded px-4 py-2 text-white"
            />
            <p className="text-xs text-gray-400 mt-1">
              ë°œê¸‰: <a href="https://aistudio.google.com/app/apikey" target="_blank" className="text-blue-400 underline">aistudio.google.com</a>
            </p>
          </div>

          {/* Stability AI */}
          <div>
            <label className="block text-sm font-semibold mb-2">
              ğŸ¨ Stability AI API Key (Stable Diffusion)
            </label>
            <input
              type="password"
              value={apiKeys.stabilityai}
              onChange={(e) => setApiKeys({ ...apiKeys, stabilityai: e.target.value })}
              placeholder="sk-..."
              className="w-full bg-gray-700 rounded px-4 py-2 text-white"
            />
            <p className="text-xs text-gray-400 mt-1">
              ë°œê¸‰: <a href="https://platform.stability.ai/" target="_blank" className="text-blue-400 underline">platform.stability.ai</a>
            </p>
          </div>

          <button
            onClick={handleSave}
            className="w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-3 rounded-lg"
          >
            {saved ? 'âœ… ì €ì¥ ì™„ë£Œ!' : 'ğŸ’¾ ì €ì¥í•˜ê¸°'}
          </button>
        </div>

        {/* ë³´ì•ˆ ì•ˆë‚´ */}
        <div className="bg-yellow-900 bg-opacity-30 border border-yellow-600 rounded-lg p-4">
          <p className="text-sm">
            ğŸ”’ <strong>ë³´ì•ˆ:</strong> API í‚¤ëŠ” ì•”í˜¸í™”ë˜ì–´ Redisì— ì €ì¥ë©ë‹ˆë‹¤.
            ì ˆëŒ€ ì œ3ìì™€ ê³µìœ í•˜ì§€ ë§ˆì„¸ìš”.
          </p>
        </div>
      </div>
    </div>
  )
}
```

#### 4.2. API í‚¤ ì €ì¥/ë¶ˆëŸ¬ì˜¤ê¸° API

**ìƒˆ íŒŒì¼:** `app/api/auto-blog/settings/route.ts`

```typescript
import { NextRequest, NextResponse } from 'next/server'
import { requireAuth } from '@/lib/auth'
import Redis from 'ioredis'
import crypto from 'crypto'

const redis = new Redis(process.env.REDIS_URL || '')

// ì•”í˜¸í™” í‚¤ (í™˜ê²½ ë³€ìˆ˜ë¡œ ê´€ë¦¬ í•„ìˆ˜!)
const ENCRYPTION_KEY = process.env.ENCRYPTION_KEY || 'default-32-char-key-change-this!'

// AES-256 ì•”í˜¸í™”
function encrypt(text: string): string {
  const iv = crypto.randomBytes(16)
  const cipher = crypto.createCipheriv('aes-256-cbc', Buffer.from(ENCRYPTION_KEY.slice(0, 32)), iv)
  let encrypted = cipher.update(text, 'utf8', 'hex')
  encrypted += cipher.final('hex')
  return iv.toString('hex') + ':' + encrypted
}

// AES-256 ë³µí˜¸í™”
function decrypt(text: string): string {
  const parts = text.split(':')
  const iv = Buffer.from(parts[0], 'hex')
  const encryptedText = parts[1]
  const decipher = crypto.createDecipheriv('aes-256-cbc', Buffer.from(ENCRYPTION_KEY.slice(0, 32)), iv)
  let decrypted = decipher.update(encryptedText, 'hex', 'utf8')
  decrypted += decipher.final('utf8')
  return decrypted
}

// GET: API í‚¤ ë¶ˆëŸ¬ì˜¤ê¸°
export async function GET(req: NextRequest) {
  const auth = requireAuth(req)
  if (!auth.authorized) {
    return NextResponse.json({ error: auth.error }, { status: 401 })
  }

  try {
    const raw = await redis.get('auto-blog:api-keys')
    if (!raw) {
      return NextResponse.json({ apiKeys: {} })
    }

    const encrypted = JSON.parse(raw)
    const apiKeys: any = {}

    // ë³µí˜¸í™”
    for (const [key, value] of Object.entries(encrypted)) {
      if (value && typeof value === 'string') {
        apiKeys[key] = decrypt(value)
      }
    }

    return NextResponse.json({ apiKeys })
  } catch (error) {
    return NextResponse.json({ error: 'Failed to load API keys' }, { status: 500 })
  }
}

// POST: API í‚¤ ì €ì¥
export async function POST(req: NextRequest) {
  const auth = requireAuth(req)
  if (!auth.authorized) {
    return NextResponse.json({ error: auth.error }, { status: 401 })
  }

  try {
    const { apiKeys } = await req.json()

    // ì•”í˜¸í™”
    const encrypted: any = {}
    for (const [key, value] of Object.entries(apiKeys)) {
      if (value && typeof value === 'string' && value.trim()) {
        encrypted[key] = encrypt(value)
      }
    }

    await redis.set('auto-blog:api-keys', JSON.stringify(encrypted))

    return NextResponse.json({ success: true })
  } catch (error) {
    return NextResponse.json({ error: 'Failed to save API keys' }, { status: 500 })
  }
}
```

**âš ï¸ ì¤‘ìš”: í™˜ê²½ ë³€ìˆ˜ ì¶”ê°€ í•„ìš”**

Vercel í™˜ê²½ ë³€ìˆ˜ì— ì¶”ê°€:
```bash
ENCRYPTION_KEY=your-32-character-secret-key-here-change-this
```

ìƒì„± ë°©ë²•:
```bash
node -e "console.log(require('crypto').randomBytes(16).toString('hex'))"
```

---

### ğŸ› ï¸ Phase 2: AI ëª¨ë¸ ì„ íƒ ì‹œìŠ¤í…œ

#### 4.3. ëª¨ë¸ ì •ì˜ ë° ë¹„ìš© ê³„ì‚°

**ìƒˆ íŒŒì¼:** `lib/auto-blog/models.ts`

```typescript
export interface AIModel {
  id: string
  name: string
  provider: 'openai' | 'anthropic' | 'google'
  type: 'text' | 'image'
  costPer1kTokens?: number // í…ìŠ¤íŠ¸ ëª¨ë¸
  costPerImage?: number // ì´ë¯¸ì§€ ëª¨ë¸
  maxTokens: number
  description: string
  requiresApiKey: string // 'openai', 'anthropic', 'gemini'
}

export const TEXT_MODELS: AIModel[] = [
  {
    id: 'gpt-4-turbo',
    name: 'GPT-4 Turbo',
    provider: 'openai',
    type: 'text',
    costPer1kTokens: 0.01,
    maxTokens: 128000,
    description: 'ìµœê³  í’ˆì§ˆ, ê¸´ ê¸€ ì‘ì„± ê°€ëŠ¥',
    requiresApiKey: 'openai'
  },
  {
    id: 'gpt-4o',
    name: 'GPT-4o',
    provider: 'openai',
    type: 'text',
    costPer1kTokens: 0.005,
    maxTokens: 128000,
    description: 'ê³ í’ˆì§ˆ, ë¹ ë¥¸ ì†ë„',
    requiresApiKey: 'openai'
  },
  {
    id: 'gpt-4o-mini',
    name: 'GPT-4o Mini',
    provider: 'openai',
    type: 'text',
    costPer1kTokens: 0.00015,
    maxTokens: 128000,
    description: 'ì €ë ´í•œ ê°€ê²©, ë¹ ë¥¸ ì†ë„',
    requiresApiKey: 'openai'
  },
  {
    id: 'claude-3-5-sonnet',
    name: 'Claude 3.5 Sonnet',
    provider: 'anthropic',
    type: 'text',
    costPer1kTokens: 0.003,
    maxTokens: 200000,
    description: 'ë§¤ìš° ê¸´ ê¸€, ìì—°ìŠ¤ëŸ¬ìš´ ë¬¸ì²´',
    requiresApiKey: 'anthropic'
  },
  {
    id: 'claude-3-haiku',
    name: 'Claude 3 Haiku',
    provider: 'anthropic',
    type: 'text',
    costPer1kTokens: 0.00025,
    maxTokens: 200000,
    description: 'ë¹ ë¥´ê³  ì €ë ´',
    requiresApiKey: 'anthropic'
  },
  {
    id: 'gemini-1.5-pro',
    name: 'Gemini 1.5 Pro',
    provider: 'google',
    type: 'text',
    costPer1kTokens: 0.00125,
    maxTokens: 1000000,
    description: 'ì´ˆëŒ€ìš©ëŸ‰ ì»¨í…ìŠ¤íŠ¸',
    requiresApiKey: 'gemini'
  },
  {
    id: 'gemini-1.0-flash',
    name: 'Gemini 1.0 Flash',
    provider: 'google',
    type: 'text',
    costPer1kTokens: 0, // ë¬´ë£Œ!
    maxTokens: 32000,
    description: 'â­ ë¬´ë£Œ! (í–¥í›„ ìœ ë£Œ ì „í™˜ ê°€ëŠ¥)',
    requiresApiKey: 'gemini'
  },
]

export const IMAGE_MODELS: AIModel[] = [
  {
    id: 'dall-e-3',
    name: 'DALL-E 3',
    provider: 'openai',
    type: 'image',
    costPerImage: 0.04, // 1024x1024 ê¸°ì¤€
    maxTokens: 0,
    description: 'ìµœê³  í’ˆì§ˆ, ì •í™•í•œ í”„ë¡¬í”„íŠ¸ ì´í•´',
    requiresApiKey: 'openai'
  },
  {
    id: 'stable-diffusion-xl',
    name: 'Stable Diffusion XL',
    provider: 'openai', // Stability AI
    type: 'image',
    costPerImage: 0.004, // DALL-E 3ì˜ 1/10
    maxTokens: 0,
    description: 'ì €ë ´í•œ ê°€ê²©, ì¢‹ì€ í’ˆì§ˆ',
    requiresApiKey: 'stabilityai'
  },
]

// ë¹„ìš© ê³„ì‚°
export function calculateTextCost(modelId: string, tokens: number): number {
  const model = TEXT_MODELS.find(m => m.id === modelId)
  if (!model || !model.costPer1kTokens) return 0
  return (tokens / 1000) * model.costPer1kTokens
}

export function calculateImageCost(modelId: string, count: number): number {
  const model = IMAGE_MODELS.find(m => m.id === modelId)
  if (!model || !model.costPerImage) return 0
  return count * model.costPerImage
}
```

#### 4.4. ëŒ€ì‹œë³´ë“œì— ëª¨ë¸ ì„ íƒ UI ì¶”ê°€

**íŒŒì¼ ìˆ˜ì •:** `app/auto-blog/page.tsx`

```typescript
'use client'
import { useEffect, useState } from 'react'
import { fetchWithAuth } from '@/lib/client-auth'
import { TEXT_MODELS, IMAGE_MODELS, calculateTextCost, calculateImageCost } from '@/lib/auto-blog/models'
import Link from 'next/link'

export default function AutoBlogDashboard() {
  // ì„¤ì •
  const [settings, setSettings] = useState({
    textModel: 'gemini-1.0-flash',
    imageModel: 'stable-diffusion-xl',
    title: '',
    category: 'operation',
    keywords: '',
    targetTokens: 2000,
    imageCount: 3,
    enableFinishing: false,
  })

  // ì˜ˆìƒ ë¹„ìš©
  const [estimatedCost, setEstimatedCost] = useState({
    text: 0,
    image: 0,
    total: 0,
  })

  // ìƒì„± ì´ë ¥
  const [history, setHistory] = useState<any[]>([])
  const [loading, setLoading] = useState(false)

  // ë¹„ìš© ê³„ì‚°
  useEffect(() => {
    const textCost = calculateTextCost(settings.textModel, settings.targetTokens)
    const imageCost = calculateImageCost(settings.imageModel, settings.imageCount)
    const total = textCost + imageCost
    setEstimatedCost({ text: textCost, image: imageCost, total })
  }, [settings])

  // ì´ë ¥ ë¶ˆëŸ¬ì˜¤ê¸°
  async function loadHistory() {
    const res = await fetch('/api/auto-blog/history')
    const data = await res.json()
    setHistory(data.items || [])
  }

  useEffect(() => {
    loadHistory()
  }, [])

  // ìˆ˜ë™ ìƒì„±
  const handleManualGenerate = async () => {
    if (!settings.title.trim()) {
      alert('ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”')
      return
    }

    setLoading(true)
    try {
      const res = await fetchWithAuth('/api/auto-blog/manual', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(settings)
      })
      if (!res.ok) throw new Error('ìƒì„± ì‹¤íŒ¨')
      await loadHistory()
      alert('ë¸”ë¡œê·¸ ìƒì„± ì™„ë£Œ!')
      // ì œëª© ì´ˆê¸°í™”
      setSettings({ ...settings, title: '' })
    } catch (e: any) {
      alert(e.message)
    } finally {
      setLoading(false)
    }
  }

  return (
    <div className="min-h-screen bg-gradient-to-br from-green-900 to-gray-900 text-white p-8">
      <div className="max-w-6xl mx-auto space-y-8">
        {/* í—¤ë” */}
        <header className="flex items-center justify-between">
          <div>
            <h1 className="text-3xl font-bold">ğŸ¤– AI ë¸”ë¡œê·¸ ìƒì„±ê¸°</h1>
            <p className="text-gray-300 mt-2">BYOK ë°©ì‹ Â· ì™„ì „ íˆ¬ëª…í•œ ë¹„ìš©</p>
          </div>
          <Link
            href="/auto-blog/settings"
            className="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-lg"
          >
            âš™ï¸ API í‚¤ ì„¤ì •
          </Link>
        </header>

        {/* ìƒì„± ì„¤ì • */}
        <div className="bg-gray-800 rounded-lg p-6 space-y-6">
          <h2 className="text-2xl font-bold">ğŸ“ ê¸€ ìƒì„± ì„¤ì •</h2>

          {/* ì œëª© ì…ë ¥ */}
          <div>
            <label className="block text-sm font-semibold mb-2">ì œëª© (í•„ìˆ˜)</label>
            <input
              type="text"
              value={settings.title}
              onChange={(e) => setSettings({ ...settings, title: e.target.value })}
              placeholder="ì˜ˆ: ì ì‹¬ íŠ¹ê°€ ë©”ë‰´ë¡œ ë§¤ì¶œ 2ë°° ì˜¬ë¦° ë¹„ê²°"
              className="w-full bg-gray-700 rounded px-4 py-2 text-white"
            />
          </div>

          {/* ì¹´í…Œê³ ë¦¬ */}
          <div>
            <label className="block text-sm font-semibold mb-2">ì¹´í…Œê³ ë¦¬</label>
            <select
              value={settings.category}
              onChange={(e) => setSettings({ ...settings, category: e.target.value })}
              className="w-full bg-gray-700 rounded px-4 py-2 text-white"
            >
              <option value="startup">ì°½ì—…</option>
              <option value="operation">ìš´ì˜</option>
              <option value="marketing">ë§ˆì¼€íŒ…</option>
              <option value="menu">ë©”ë‰´ ê°œë°œ</option>
              <option value="trend">íŠ¸ë Œë“œ</option>
              <option value="franchise">í”„ëœì°¨ì´ì¦ˆ</option>
            </select>
          </div>

          {/* í‚¤ì›Œë“œ */}
          <div>
            <label className="block text-sm font-semibold mb-2">í‚¤ì›Œë“œ (ì‰¼í‘œë¡œ êµ¬ë¶„)</label>
            <input
              type="text"
              value={settings.keywords}
              onChange={(e) => setSettings({ ...settings, keywords: e.target.value })}
              placeholder="ì˜ˆ: ì ì‹¬íŠ¹ê°€, íšŒì „ìœ¨, ë©”ë‰´ë‹¨ìˆœí™”"
              className="w-full bg-gray-700 rounded px-4 py-2 text-white"
            />
          </div>

          {/* AI ëª¨ë¸ ì„ íƒ */}
          <div className="grid grid-cols-2 gap-4">
            <div>
              <label className="block text-sm font-semibold mb-2">í…ìŠ¤íŠ¸ ìƒì„± ëª¨ë¸</label>
              <select
                value={settings.textModel}
                onChange={(e) => setSettings({ ...settings, textModel: e.target.value })}
                className="w-full bg-gray-700 rounded px-4 py-2 text-white text-sm"
              >
                {TEXT_MODELS.map(model => (
                  <option key={model.id} value={model.id}>
                    {model.name} - ${model.costPer1kTokens}/1kí† í°
                  </option>
                ))}
              </select>
            </div>

            <div>
              <label className="block text-sm font-semibold mb-2">ì´ë¯¸ì§€ ìƒì„± ëª¨ë¸</label>
              <select
                value={settings.imageModel}
                onChange={(e) => setSettings({ ...settings, imageModel: e.target.value })}
                className="w-full bg-gray-700 rounded px-4 py-2 text-white text-sm"
              >
                {IMAGE_MODELS.map(model => (
                  <option key={model.id} value={model.id}>
                    {model.name} - ${model.costPerImage}/ì¥
                  </option>
                ))}
              </select>
            </div>
          </div>

          {/* í† í° ìˆ˜ & ì´ë¯¸ì§€ ê°œìˆ˜ */}
          <div className="grid grid-cols-2 gap-4">
            <div>
              <label className="block text-sm font-semibold mb-2">
                ëª©í‘œ í† í° ìˆ˜ (ê¸€ ê¸¸ì´)
              </label>
              <input
                type="number"
                value={settings.targetTokens}
                onChange={(e) => setSettings({ ...settings, targetTokens: parseInt(e.target.value) })}
                min={500}
                max={10000}
                step={100}
                className="w-full bg-gray-700 rounded px-4 py-2 text-white"
              />
              <p className="text-xs text-gray-400 mt-1">
                ì•½ {Math.round(settings.targetTokens * 0.75)}ì ({Math.ceil(settings.targetTokens * 0.75 / 500)}ë¶„ ì½ê¸°)
              </p>
            </div>

            <div>
              <label className="block text-sm font-semibold mb-2">ì´ë¯¸ì§€ ê°œìˆ˜</label>
              <input
                type="number"
                value={settings.imageCount}
                onChange={(e) => setSettings({ ...settings, imageCount: parseInt(e.target.value) })}
                min={0}
                max={10}
                className="w-full bg-gray-700 rounded px-4 py-2 text-white"
              />
            </div>
          </div>

          {/* ë§ˆê° ì²˜ë¦¬ */}
          <div>
            <label className="flex items-center space-x-2">
              <input
                type="checkbox"
                checked={settings.enableFinishing}
                onChange={(e) => setSettings({ ...settings, enableFinishing: e.target.checked })}
                className="w-5 h-5"
              />
              <span className="text-sm font-semibold">
                ë§ˆê° ì²˜ë¦¬ í™œì„±í™” (Geminië¡œ ìµœì¢… ë‹¤ë“¬ê¸°)
              </span>
            </label>
            <p className="text-xs text-gray-400 mt-1 ml-7">
              ë¬¸ë§¥ì„ ìì—°ìŠ¤ëŸ½ê²Œ ë‹¤ë“¬ê³  ê°ì„±ì  í‘œí˜„ ì¶”ê°€ (Gemini API í‚¤ í•„ìš”)
            </p>
          </div>

          {/* ì˜ˆìƒ ë¹„ìš© */}
          <div className="bg-green-900 bg-opacity-30 border border-green-600 rounded-lg p-4">
            <p className="text-sm font-semibold mb-2">ğŸ’° ì˜ˆìƒ ë¹„ìš©</p>
            <div className="text-xs space-y-1">
              <p>í…ìŠ¤íŠ¸: ${estimatedCost.text.toFixed(4)}</p>
              <p>ì´ë¯¸ì§€: ${estimatedCost.image.toFixed(4)}</p>
              <p className="font-bold text-base text-green-400">
                ì´: ${estimatedCost.total.toFixed(4)} (ì•½ {(estimatedCost.total * 1400).toFixed(0)}ì›)
              </p>
            </div>
          </div>

          {/* ìƒì„± ë²„íŠ¼ */}
          <button
            onClick={handleManualGenerate}
            disabled={loading || !settings.title.trim()}
            className="w-full bg-green-600 hover:bg-green-700 disabled:bg-gray-600 text-white font-bold py-4 rounded-lg text-lg"
          >
            {loading ? 'ìƒì„± ì¤‘...' : 'ğŸš€ ì§€ê¸ˆ ìƒì„±í•˜ê¸°'}
          </button>
        </div>

        {/* ìƒì„± ì´ë ¥ */}
        <section className="bg-gray-800 rounded-lg p-6">
          <h2 className="text-2xl font-bold mb-4">ğŸ“š ìƒì„± ì´ë ¥</h2>
          <div className="space-y-3">
            {history.length === 0 && <p className="text-gray-400">ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.</p>}
            {history.map((h, idx) => (
              <div key={idx} className="flex items-center justify-between bg-gray-700 rounded-md p-4">
                <div>
                  <p className="font-semibold">{h.topic?.title || h.title}</p>
                  <p className="text-sm text-gray-300">
                    {new Date(h.timestamp).toLocaleString()} Â·
                    {h.textModel} Â· ì´ë¯¸ì§€ {h.imagesGenerated || 0}ê°œ Â·
                    ë¹„ìš©: ${h.totalCost?.toFixed(4) || '0.0000'}
                  </p>
                </div>
                <a
                  className={`text-sm ${h.result?.success ? 'text-green-400' : 'text-red-400'}`}
                  href={h.result?.url || '#'}
                  target="_blank"
                >
                  {h.result?.success ? 'ì—´ê¸°' : 'ì‹¤íŒ¨'}
                </a>
              </div>
            ))}
          </div>
        </section>
      </div>
    </div>
  )
}
```

---

### ğŸ› ï¸ Phase 3: AI ëª¨ë¸ë³„ API í˜¸ì¶œ ë¡œì§

#### 4.5. í†µí•© AI í´ë¼ì´ì–¸íŠ¸

**ìƒˆ íŒŒì¼:** `lib/auto-blog/ai-client.ts`

```typescript
import { TEXT_MODELS, IMAGE_MODELS } from './models'
import Redis from 'ioredis'

const redis = new Redis(process.env.REDIS_URL || '')

// API í‚¤ ë¶ˆëŸ¬ì˜¤ê¸° (ë³µí˜¸í™” í¬í•¨)
async function getApiKeys(): Promise<any> {
  // TODO: settings/route.tsì˜ decrypt í•¨ìˆ˜ ì¬ì‚¬ìš©
  const raw = await redis.get('auto-blog:api-keys')
  if (!raw) return {}
  // ë³µí˜¸í™” ë¡œì§ (Phase 1ì—ì„œ êµ¬í˜„í•œ ê²ƒê³¼ ë™ì¼)
  return JSON.parse(raw) // ê°„ë‹¨íˆ í‘œì‹œ (ì‹¤ì œë¡œëŠ” ë³µí˜¸í™” í•„ìš”)
}

// í…ìŠ¤íŠ¸ ìƒì„±
export async function generateText(
  modelId: string,
  prompt: string,
  maxTokens: number
): Promise<{ text: string; tokensUsed: number }> {
  const model = TEXT_MODELS.find(m => m.id === modelId)
  if (!model) throw new Error('Unknown model')

  const apiKeys = await getApiKeys()
  const apiKey = apiKeys[model.requiresApiKey]
  if (!apiKey) throw new Error(`API key not found for ${model.requiresApiKey}`)

  // OpenAI
  if (model.provider === 'openai') {
    const response = await fetch('https://api.openai.com/v1/chat/completions', {
      method: 'POST',
      headers: {
        'Authorization': `Bearer ${apiKey}`,
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({
        model: modelId,
        messages: [{ role: 'user', content: prompt }],
        max_tokens: maxTokens,
      })
    })

    const data = await response.json()
    if (!response.ok) throw new Error(data.error?.message || 'OpenAI API error')

    return {
      text: data.choices[0].message.content,
      tokensUsed: data.usage.total_tokens,
    }
  }

  // Anthropic (Claude)
  if (model.provider === 'anthropic') {
    const response = await fetch('https://api.anthropic.com/v1/messages', {
      method: 'POST',
      headers: {
        'x-api-key': apiKey,
        'anthropic-version': '2023-06-01',
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({
        model: modelId,
        max_tokens: maxTokens,
        messages: [{ role: 'user', content: prompt }],
      })
    })

    const data = await response.json()
    if (!response.ok) throw new Error(data.error?.message || 'Anthropic API error')

    return {
      text: data.content[0].text,
      tokensUsed: data.usage.input_tokens + data.usage.output_tokens,
    }
  }

  // Google Gemini
  if (model.provider === 'google') {
    const response = await fetch(
      `https://generativelanguage.googleapis.com/v1beta/models/${modelId}:generateContent?key=${apiKey}`,
      {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          contents: [{ parts: [{ text: prompt }] }],
          generationConfig: { maxOutputTokens: maxTokens },
        })
      }
    )

    const data = await response.json()
    if (!response.ok) throw new Error(data.error?.message || 'Gemini API error')

    return {
      text: data.candidates[0].content.parts[0].text,
      tokensUsed: data.usageMetadata?.totalTokenCount || 0,
    }
  }

  throw new Error('Unsupported provider')
}

// ì´ë¯¸ì§€ ìƒì„±
export async function generateImage(
  modelId: string,
  prompt: string
): Promise<{ imageUrl?: string; imageBase64?: string }> {
  const model = IMAGE_MODELS.find(m => m.id === modelId)
  if (!model) throw new Error('Unknown image model')

  const apiKeys = await getApiKeys()
  const apiKey = apiKeys[model.requiresApiKey]
  if (!apiKey) throw new Error(`API key not found for ${model.requiresApiKey}`)

  // DALL-E 3
  if (modelId === 'dall-e-3') {
    const response = await fetch('https://api.openai.com/v1/images/generations', {
      method: 'POST',
      headers: {
        'Authorization': `Bearer ${apiKey}`,
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({
        model: 'dall-e-3',
        prompt,
        n: 1,
        size: '1024x1024',
      })
    })

    const data = await response.json()
    if (!response.ok) throw new Error(data.error?.message || 'DALL-E API error')

    return { imageUrl: data.data[0].url }
  }

  // Stable Diffusion (Stability AI)
  if (modelId === 'stable-diffusion-xl') {
    const response = await fetch(
      'https://api.stability.ai/v1/generation/stable-diffusion-xl-1024-v1-0/text-to-image',
      {
        method: 'POST',
        headers: {
          'Authorization': `Bearer ${apiKey}`,
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({
          text_prompts: [{ text: prompt }],
          cfg_scale: 7,
          height: 1024,
          width: 1024,
          samples: 1,
          steps: 30,
        })
      }
    )

    const data = await response.json()
    if (!response.ok) throw new Error(data.message || 'Stability AI error')

    return { imageBase64: data.artifacts[0].base64 }
  }

  throw new Error('Unsupported image model')
}
```

---

### ğŸ› ï¸ Phase 4: ì½˜í…ì¸  ìƒì„± ë¡œì§ ìˆ˜ì •

#### 4.6. content-generator.ts ìˆ˜ì •

**íŒŒì¼ ìˆ˜ì •:** `lib/auto-blog/content-generator.ts`

ê¸°ì¡´ stub ì½”ë“œë¥¼ ì‹¤ì œ AI í˜¸ì¶œë¡œ êµì²´:

```typescript
import { generateText } from './ai-client'
import type { Topic } from './topic-generator'

export interface BlogContent {
  title: string
  content: string
  sections: Section[]
  imagePlaceholders: ImagePlaceholder[]
  internalLinks: string[]
  cta: string
  estimatedReadTime: number
  tokensUsed: number
}

export async function generateContent(
  topic: Topic,
  settings: {
    textModel: string
    targetTokens: number
    keywords: string
    category: string
  }
): Promise<BlogContent> {

  const prompt = `
ë‹¹ì‹ ì€ 15ë…„ ê²½ë ¥ì˜ ì™¸ì‹ì—… ì»¨ì„¤í„´íŠ¸ì´ì ë¸”ë¡œê·¸ ì‘ê°€ì…ë‹ˆë‹¤.

ì£¼ì œ: ${topic.title}
ì¹´í…Œê³ ë¦¬: ${settings.category}
í‚¤ì›Œë“œ: ${settings.keywords}

ë‹¤ìŒ ìŠ¤íƒ€ì¼ë¡œ ${settings.targetTokens}í† í° ë¶„ëŸ‰ì˜ ë¸”ë¡œê·¸ ê¸€ì„ ì‘ì„±í•˜ì„¸ìš”:

âœ… ê¸€ì“°ê¸° ê·œì¹™:
1. ì¹œê·¼í•˜ë©´ì„œë„ ì „ë¬¸ì ì¸ í†¤
2. ì‹¤ì œ ê²½í—˜ë‹´ì²˜ëŸ¼ ì‘ì„± ("ì €ë„ ì²˜ìŒì—”...", "ê²½í—˜ìƒ..." ë“±)
3. êµ¬ì²´ì ì¸ ìˆ˜ì¹˜ì™€ ì˜ˆì‹œ í¬í•¨
4. ë‹¨ë½ì€ 3-4ë¬¸ì¥ìœ¼ë¡œ ì§§ê²Œ
5. ì†Œì œëª©ìœ¼ë¡œ ê°€ë…ì„± í–¥ìƒ
6. ë¶ˆë¦¿ í¬ì¸íŠ¸, ë²ˆí˜¸ ë¦¬ìŠ¤íŠ¸ ì ê·¹ í™œìš©

ğŸ“ êµ¬ì¡°:
- ë„ì…ë¶€: ê³µê°ëŒ€ í˜•ì„± + ë¬¸ì œ ì œê¸° (2-3ë¬¸ë‹¨)
- ë³¸ë¡ : í•´ê²°ì±… 3-5ê°€ì§€ (ê° ì†Œì œëª© í¬í•¨)
- ê²°ë¡ : ìš”ì•½ + ì‹¤ì²œ ë°©ë²• + ê²©ë ¤

ğŸ–¼ï¸ ì´ë¯¸ì§€ ìœ„ì¹˜:
- [IMAGE:1] í˜•íƒœë¡œ í‘œì‹œ
- ë³¸ë¬¸ íë¦„ì— ë§ê²Œ 3-5ê°œ ë°°ì¹˜
- ê° ì´ë¯¸ì§€ë§ˆë‹¤ ì„¤ëª… ì£¼ì„ í¬í•¨

Markdown í˜•ì‹ìœ¼ë¡œ ì‘ë‹µí•˜ì„¸ìš”.
  `.trim()

  const result = await generateText(
    settings.textModel,
    prompt,
    settings.targetTokens
  )

  // ì´ë¯¸ì§€ í”Œë ˆì´ìŠ¤í™€ë” íŒŒì‹±
  const imagePlaceholders: ImagePlaceholder[] = []
  const imageRegex = /\[IMAGE:(\d+)\]\s*<!--\s*(.+?)\s*-->/g
  let match
  while ((match = imageRegex.exec(result.text)) !== null) {
    imagePlaceholders.push({
      position: parseInt(match[1]),
      description: match[2],
      alt: match[2].substring(0, 50), // ê°„ë‹¨íˆ ì„¤ëª… ì•ë¶€ë¶„ ì‚¬ìš©
    })
  }

  return {
    title: topic.title,
    content: result.text,
    sections: [], // TODO: íŒŒì‹±
    imagePlaceholders,
    internalLinks: [],
    cta: 'ì˜¤ëŠ˜ë¶€í„° ì‹¤ì²œí•´ë³´ì„¸ìš”!',
    estimatedReadTime: Math.ceil(result.tokensUsed * 0.75 / 500),
    tokensUsed: result.tokensUsed,
  }
}
```

---

### ğŸ› ï¸ Phase 5: ì´ë¯¸ì§€ ìƒì„± ë° alt íƒœê·¸

#### 4.7. image-generator.ts ìˆ˜ì •

**íŒŒì¼ ìˆ˜ì •:** `lib/auto-blog/image-generator.ts`

```typescript
import { generateImage, generateText } from './ai-client'
import type { BlogContent } from './content-generator'

export interface GeneratedImage {
  id: string
  type: 'thumbnail' | 'content'
  base64?: string
  url?: string
  alt: string
  prompt: string
  position?: number
}

export async function generateImages(
  content: BlogContent,
  settings: {
    imageModel: string
    imageCount: number
  }
): Promise<GeneratedImage[]> {

  const images: GeneratedImage[] = []

  // 1. ì¸ë„¤ì¼ ìƒì„±
  if (settings.imageCount > 0) {
    const thumbnailPrompt = `
Professional, high-quality photograph for a Korean restaurant business blog.
Topic: ${content.title}
Style: Realistic, modern, clean, bright lighting
Setting: Korean restaurant or cafe interior/exterior
No text overlay, no people faces clearly visible
16:9 aspect ratio, suitable for blog thumbnail
    `.trim()

    const thumbnail = await generateImage(settings.imageModel, thumbnailPrompt)

    // alt íƒœê·¸ ìë™ ìƒì„± (Gemini ì‚¬ìš©)
    const altText = await generateAltTag(thumbnailPrompt, content.title)

    images.push({
      id: 'thumbnail',
      type: 'thumbnail',
      base64: thumbnail.imageBase64,
      url: thumbnail.imageUrl,
      alt: altText,
      prompt: thumbnailPrompt,
    })
  }

  // 2. ë³¸ë¬¸ ì´ë¯¸ì§€ ìƒì„±
  const placeholders = content.imagePlaceholders.slice(0, settings.imageCount - 1)

  for (let i = 0; i < placeholders.length; i++) {
    const ph = placeholders[i]
    const imagePrompt = `
Realistic photograph for Korean restaurant business blog article.
Scene: ${ph.description}
Style: Professional, natural lighting, authentic Korean restaurant setting
No text, no watermarks
High quality, editorial style
4:3 aspect ratio
    `.trim()

    const image = await generateImage(settings.imageModel, imagePrompt)
    const altText = await generateAltTag(imagePrompt, ph.description)

    images.push({
      id: `image-${i + 1}`,
      type: 'content',
      base64: image.imageBase64,
      url: image.imageUrl,
      alt: altText,
      prompt: imagePrompt,
      position: ph.position,
    })
  }

  return images
}

// alt íƒœê·¸ ìë™ ìƒì„± (SEO ìµœì í™”)
async function generateAltTag(imagePrompt: string, context: string): Promise<string> {
  const prompt = `
ë‹¤ìŒ ì´ë¯¸ì§€ ì„¤ëª…ì„ ë°”íƒ•ìœ¼ë¡œ SEOì— ìµœì í™”ëœ alt íƒœê·¸ë¥¼ ì‘ì„±í•˜ì„¸ìš”.

ì´ë¯¸ì§€ ì„¤ëª…: ${imagePrompt}
ë¬¸ë§¥: ${context}

ì¡°ê±´:
- 50ì ì´ë‚´
- í•µì‹¬ í‚¤ì›Œë“œ í¬í•¨
- ìì—°ìŠ¤ëŸ¬ìš´ í•œêµ­ì–´
- êµ¬ì²´ì ì´ê³  ëª…í™•í•˜ê²Œ

alt íƒœê·¸ë§Œ ì‘ë‹µí•˜ì„¸ìš”.
  `.trim()

  const result = await generateText('gemini-1.0-flash', prompt, 100)
  return result.text.trim().replace(/^["']|["']$/g, '') // ë”°ì˜´í‘œ ì œê±°
}
```

---

### ğŸ› ï¸ Phase 6: ë§ˆê° ì²˜ë¦¬ (Finishing)

#### 4.8. ìƒˆ íŒŒì¼ ì¶”ê°€

**ìƒˆ íŒŒì¼:** `lib/auto-blog/finishing.ts`

```typescript
import { generateText } from './ai-client'

export async function applyFinishing(content: string): Promise<string> {
  const prompt = `
ë‹¤ìŒ ë¸”ë¡œê·¸ ê¸€ì„ ë”ìš± ìì—°ìŠ¤ëŸ½ê³  ê°ì„±ì ìœ¼ë¡œ ë‹¤ë“¬ì–´ì£¼ì„¸ìš”.

ì›ë³¸:
${content}

ê°œì„  ì‚¬í•­:
1. ë”±ë”±í•œ í‘œí˜„ â†’ ì¹œê·¼í•˜ê³  ë”°ëœ»í•œ í‘œí˜„
2. ì „ë¬¸ ìš©ì–´ì— ì‰¬ìš´ ì„¤ëª… ì¶”ê°€
3. ê¸´ ë¬¸ì¥ â†’ ì§§ê³  ëª…í™•í•˜ê²Œ
4. ë¶ˆí•„ìš”í•œ ì ‘ì†ì‚¬ ì œê±°
5. ë…ìì—ê²Œ ë§í•˜ëŠ” ë“¯í•œ í†¤
6. ê°ì •ì´ì… ê°€ëŠ¥í•œ í‘œí˜„ ì¶”ê°€

ì›ë³¸ì˜ êµ¬ì¡°ì™€ ì •ë³´ëŠ” ìœ ì§€í•˜ë˜, ë¬¸ì²´ë§Œ ê°œì„ í•˜ì„¸ìš”.
Markdown í˜•ì‹ ê·¸ëŒ€ë¡œ ìœ ì§€í•˜ì„¸ìš”.
  `.trim()

  const result = await generateText('gemini-1.0-flash', prompt, 4000)
  return result.text
}
```

---

## 5. íŒŒì¼ë³„ ìˆ˜ì • ë‚´ì—­

### ğŸ“ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] **í™˜ê²½ ì„¤ì •** âœ… **Phase 0 ì™„ë£Œ**
  - [x] `JWT_SECRET` ìƒì„± ë° .env.local ì¶”ê°€
  - [x] `ENCRYPTION_KEY` ìƒì„± ë° .env.local ì¶”ê°€
  - [x] `ADMIN_PASSWORD` .env.local ì¶”ê°€
  - [ ] Vercel í™˜ê²½ ë³€ìˆ˜ ë“±ë¡ (JWT_SECRET, ENCRYPTION_KEY, ADMIN_PASSWORD)

- [ ] **ìƒˆ íŒŒì¼ ìƒì„±** â³ **Phase 1-2 ëŒ€ê¸°**
  - [ ] `app/auto-blog/settings/page.tsx` - API í‚¤ ì„¤ì • UI
  - [ ] `app/api/auto-blog/settings/route.ts` - API í‚¤ ì €ì¥/ë¶ˆëŸ¬ì˜¤ê¸°
  - [ ] `lib/auto-blog/models.ts` - ëª¨ë¸ ì •ì˜ ë° ë¹„ìš© ê³„ì‚°
  - [ ] `lib/auto-blog/ai-client.ts` - í†µí•© AI í´ë¼ì´ì–¸íŠ¸
  - [ ] `lib/auto-blog/finishing.ts` - ë§ˆê° ì²˜ë¦¬
  - [ ] `lib/auto-blog/api-keys.ts` - ì•”í˜¸í™”ëœ API í‚¤ ë¡œë“œ ìœ í‹¸

- [ ] **ê¸°ì¡´ íŒŒì¼ ìˆ˜ì •** â³ **Phase 1-2 ëŒ€ê¸°**
  - [ ] `app/auto-blog/page.tsx` - ëŒ€ì‹œë³´ë“œ UI ì „ë©´ ê°œí¸
  - [ ] `lib/auto-blog/content-generator.ts` - AI í˜¸ì¶œ ë¡œì§ ì¶”ê°€
  - [ ] `lib/auto-blog/image-generator.ts` - ëª¨ë¸ ì„ íƒ ë° alt íƒœê·¸ ìƒì„±
  - [ ] `app/api/auto-blog/manual/route.ts` - settings íŒŒë¼ë¯¸í„° ë°›ê¸°
  - [ ] `app/components/Navigation.tsx` - "API í‚¤ ì„¤ì •" ë©”ë‰´ ì¶”ê°€

---

## 6. í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

### ğŸ§ª í…ŒìŠ¤íŠ¸ 1: API í‚¤ ì„¤ì •

1. `/auto-blog/settings` ì ‘ì†
2. OpenAI API í‚¤ ì…ë ¥
3. Gemini API í‚¤ ì…ë ¥
4. ì €ì¥ ë²„íŠ¼ í´ë¦­
5. í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ í›„ í‚¤ ìœ ì§€ í™•ì¸

### ğŸ§ª í…ŒìŠ¤íŠ¸ 2: ë¬´ë£Œ ëª¨ë¸ë¡œ ìƒì„±

1. `/auto-blog` ì ‘ì†
2. ì œëª© ì…ë ¥: "ì ì‹¬ íŠ¹ê°€ ë©”ë‰´ ì„±ê³µ ì „ëµ"
3. í…ìŠ¤íŠ¸ ëª¨ë¸: Gemini 1.0 Flash (ë¬´ë£Œ)
4. ì´ë¯¸ì§€ ëª¨ë¸: Stable Diffusion XL
5. ì´ë¯¸ì§€ ê°œìˆ˜: 3
6. ì˜ˆìƒ ë¹„ìš© í™•ì¸ (ì•½ $0.012)
7. ìƒì„± ë²„íŠ¼ í´ë¦­
8. ìƒì„± ì™„ë£Œ í›„ `/blog`ì—ì„œ í™•ì¸

### ğŸ§ª í…ŒìŠ¤íŠ¸ 3: ê³ í’ˆì§ˆ ëª¨ë¸ë¡œ ìƒì„±

1. í…ìŠ¤íŠ¸ ëª¨ë¸: GPT-4 Turbo
2. ì´ë¯¸ì§€ ëª¨ë¸: DALL-E 3
3. ì´ë¯¸ì§€ ê°œìˆ˜: 5
4. í† í° ìˆ˜: 3000
5. ë§ˆê° ì²˜ë¦¬: í™œì„±í™”
6. ì˜ˆìƒ ë¹„ìš© í™•ì¸ (ì•½ $0.25)
7. ìƒì„± ë° ê²°ê³¼ í™•ì¸

### ğŸ§ª í…ŒìŠ¤íŠ¸ 4: ë¹„ìš© ë¹„êµ

1. ê°™ì€ ì œëª©ìœ¼ë¡œ ë‹¤ë¥¸ ëª¨ë¸ ì¡°í•© í…ŒìŠ¤íŠ¸
2. ìƒì„± ì´ë ¥ì—ì„œ ì‹¤ì œ ë¹„ìš© ë¹„êµ
3. í’ˆì§ˆ ì°¨ì´ í™•ì¸

---

## 7. êµ¬í˜„ ì‹œ ì£¼ì˜ì‚¬í•­

### âš ï¸ ë³´ì•ˆ

1. **API í‚¤ ì•”í˜¸í™” í•„ìˆ˜**
   - AES-256 ì‚¬ìš©
   - ENCRYPTION_KEY í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
   - Gitì— ì ˆëŒ€ ì»¤ë°‹ ê¸ˆì§€

2. **ì¸ì¦ í™•ì¸**
   - ëª¨ë“  APIì— `requireAuth` ì ìš©
   - Cron Jobì€ CRON_SECRET ì‚¬ìš©

### âš ï¸ ì—ëŸ¬ ì²˜ë¦¬

1. **API í‚¤ ì—†ì„ ë•Œ**
   - ì¹œì ˆí•œ ì•ˆë‚´ ë©”ì‹œì§€
   - ì„¤ì • í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸

2. **API í˜¸ì¶œ ì‹¤íŒ¨**
   - ì¬ì‹œë„ ë¡œì§ (ìµœëŒ€ 3íšŒ)
   - ìƒì„¸í•œ ì—ëŸ¬ ë©”ì‹œì§€
   - Redisì— ì—ëŸ¬ ë¡œê·¸ ì €ì¥

3. **í• ë‹¹ëŸ‰ ì´ˆê³¼**
   - Rate limit ê°ì§€
   - ëŒ€ì²´ ëª¨ë¸ ì œì•ˆ

### âš ï¸ ì„±ëŠ¥

1. **ì´ë¯¸ì§€ ìƒì„± ì‹œê°„**
   - ë³‘ë ¬ ì²˜ë¦¬ ê³ ë ¤
   - íƒ€ì„ì•„ì›ƒ ì„¤ì • (30ì´ˆ)

2. **ë¹„ìš© ìµœì í™”**
   - ê¸°ë³¸ê°’ì„ ì €ë¹„ìš© ëª¨ë¸ë¡œ
   - ì‚¬ìš©ìì—ê²Œ ë¹„ìš© ê²½ê³ 

---

## 8. ë‹¤ìŒ ë‹¨ê³„

### âœ… Phase 1-6 ì™„ë£Œ í›„

1. ì‹¤ì œ ì‚¬ìš©ì í…ŒìŠ¤íŠ¸
2. í”¼ë“œë°± ìˆ˜ì§‘
3. ë²„ê·¸ ìˆ˜ì •
4. í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿ ê°œì„ 

### ğŸš€ í–¥í›„ í™•ì¥

- í”„ë¦¬ì…‹ ì €ì¥ ê¸°ëŠ¥
- ì—…ì¢…ë³„ í…œí”Œë¦¿
- A/B í…ŒìŠ¤íŠ¸ ê¸°ëŠ¥
- ë¹„ìš© í†µê³„ ëŒ€ì‹œë³´ë“œ
- ì›” ì˜ˆì‚° ì„¤ì • ë° ì•Œë¦¼

---

## ğŸ“ êµ¬í˜„ ì§€ì›

ì´ ë¬¸ì„œë¥¼ ë‹¤ë¥¸ AIì—ê²Œ ì „ë‹¬í•  ë•Œ:

```
"ë¸”ë¡œê·¸_ìƒì„±ê¸°_ìˆ˜ì •ê³„íš.md íŒŒì¼ì„ ì½ê³  Phase 1ë¶€í„° ìˆœì„œëŒ€ë¡œ êµ¬í˜„í•´ì¤˜.
ê° Phaseê°€ ì™„ë£Œë˜ë©´ ë‹¤ìŒ Phaseë¡œ ë„˜ì–´ê°€ê³ , ì™„ë£Œ ì—¬ë¶€ë¥¼ ì²´í¬ë¦¬ìŠ¤íŠ¸ì— í‘œì‹œí•´ì¤˜."
```

---

**ì‘ì„±:** Claude Code
**ë²„ì „:** 1.1
**ë‚ ì§œ:** 2025-11-02
**ìµœê·¼ ì—…ë°ì´íŠ¸:** Phase 0 í™˜ê²½ ì„¤ì • ì™„ë£Œ
