(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[323],{3771:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>n});var a=l(5155),r=l(8661),s=l.n(r),o=l(2115),i=l(7909);l(1736);let c=(0,i.default)(()=>Promise.all([l.e(692),l.e(627)]).then(l.t.bind(l,1720,23)),{loadableGenerated:{webpack:()=>[1720]},ssr:!1});function n(){let[e,t]=(0,o.useState)(""),[l,r]=(0,o.useState)(""),[i,n]=(0,o.useState)(""),[b,d]=(0,o.useState)(!1),f=(0,o.useRef)(null),u={toolbar:{container:[[{header:[1,2,3,4,5,6,!1]}],[{font:[]}],[{size:["small",!1,"large","huge"]}],["bold","italic","underline","strike"],[{color:[]},{background:[]}],[{script:"sub"},{script:"super"}],[{list:"ordered"},{list:"bullet"}],[{indent:"-1"},{indent:"+1"}],[{align:[]}],["blockquote","code-block"],["link","image","video"],["clean"]],handlers:{image:()=>{let e=document.createElement("input");e.setAttribute("type","file"),e.setAttribute("accept","image/*"),e.click(),e.onchange=async()=>{var t;let l=null==(t=e.files)?void 0:t[0];if(!l)return;let a=new FileReader;a.onload=()=>{var e;let t=null==(e=f.current)?void 0:e.getEditor(),l=null==t?void 0:t.getSelection();l&&a.result&&t.insertEmbed(l.index,"image",a.result)},a.readAsDataURL(l)}}}},clipboard:{matchVisual:!1}},x=()=>{localStorage.setItem("blog-draft",JSON.stringify({title:e,content:l})),n("✅ 임시저장 완료"),setTimeout(()=>n(""),2e3)};(0,o.useEffect)(()=>{let e=localStorage.getItem("blog-draft");if(e)try{let{title:l,content:a}=JSON.parse(e);(l||a)&&confirm("임시저장된 글이 있습니다. 불러오시겠습니까?")&&(t(l),r(a))}catch(e){console.error("Failed to load draft:",e)}},[]),(0,o.useEffect)(()=>{if(!e&&!l)return;let t=setInterval(()=>{x()},3e4);return()=>clearInterval(t)},[e,l]);let m=async t=>{if(t.preventDefault(),!e.trim())return void alert("제목을 입력해주세요.");if(!l.trim()||"<p><br></p>"===l)return void alert("내용을 입력해주세요.");d(!0),n("발행 중...");try{let t=await fetch("/api/blog/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:e,content:l})});if(t.ok){let e=await t.json();n("✅ 게시글이 발행되었습니다!"),localStorage.removeItem("blog-draft"),setTimeout(()=>{window.location.href="/blog/".concat(e.slug)},1500)}else n("❌ 발행 실패"),d(!1)}catch(e){n("❌ 오류 발생"),d(!1)}};return(0,a.jsxs)("div",{className:"jsx-990fcbcbf062a4be min-h-screen bg-gray-50",children:[(0,a.jsx)("div",{className:"jsx-990fcbcbf062a4be bg-white border-b border-gray-200 sticky top-0 z-50 shadow-sm",children:(0,a.jsx)("div",{className:"jsx-990fcbcbf062a4be max-w-7xl mx-auto px-4 py-3",children:(0,a.jsxs)("div",{className:"jsx-990fcbcbf062a4be flex items-center justify-between",children:[(0,a.jsx)("a",{href:"/blog",className:"jsx-990fcbcbf062a4be text-gray-600 hover:text-gray-900 transition-colors",children:"← 목록으로"}),(0,a.jsxs)("div",{className:"jsx-990fcbcbf062a4be flex items-center gap-3",children:[i&&(0,a.jsx)("span",{className:"jsx-990fcbcbf062a4be text-sm text-gray-600",children:i}),(0,a.jsx)("button",{type:"button",onClick:x,disabled:b,className:"jsx-990fcbcbf062a4be px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"임시저장"}),(0,a.jsx)("button",{onClick:m,disabled:b,className:"jsx-990fcbcbf062a4be px-6 py-2 text-sm font-medium text-white bg-green-600 hover:bg-green-700 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"발행하기"})]})]})})}),(0,a.jsxs)("div",{className:"jsx-990fcbcbf062a4be max-w-5xl mx-auto px-4 py-8",children:[(0,a.jsxs)("div",{className:"jsx-990fcbcbf062a4be bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[(0,a.jsx)("div",{className:"jsx-990fcbcbf062a4be border-b border-gray-200",children:(0,a.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),placeholder:"제목을 입력하세요",disabled:b,className:"jsx-990fcbcbf062a4be w-full px-6 py-4 text-3xl font-bold border-none focus:outline-none focus:ring-0 placeholder-gray-300"})}),(0,a.jsx)("div",{className:"jsx-990fcbcbf062a4be quill-wrapper",children:(0,a.jsx)(c,{ref:f,theme:"snow",value:l,onChange:r,modules:u,formats:["header","font","size","bold","italic","underline","strike","color","background","script","list","bullet","indent","align","blockquote","code-block","link","image","video"],placeholder:"이야기를 시작하세요...",className:"blog-editor"})})]}),(0,a.jsxs)("div",{className:"jsx-990fcbcbf062a4be mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,a.jsx)("h3",{className:"jsx-990fcbcbf062a4be text-sm font-semibold text-blue-900 mb-2",children:"\uD83D\uDCA1 에디터 사용 팁"}),(0,a.jsxs)("ul",{className:"jsx-990fcbcbf062a4be text-sm text-blue-800 space-y-1",children:[(0,a.jsx)("li",{className:"jsx-990fcbcbf062a4be",children:"• 이미지: 툴바의 이미지 아이콘을 클릭하거나 복사-붙여넣기"}),(0,a.jsx)("li",{className:"jsx-990fcbcbf062a4be",children:"• 자동 저장: 30초마다 자동으로 임시저장됩니다"}),(0,a.jsx)("li",{className:"jsx-990fcbcbf062a4be",children:"• 단축키: Ctrl+B (굵게), Ctrl+I (기울임), Ctrl+U (밑줄)"}),(0,a.jsx)("li",{className:"jsx-990fcbcbf062a4be",children:"• 링크: 텍스트 선택 후 링크 아이콘 클릭"})]})]})]}),(0,a.jsx)(s(),{id:"990fcbcbf062a4be",children:'.blog-editor .ql-container{min-height:500px;font-size:16px;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif}.blog-editor .ql-editor{min-height:500px;padding:24px}.blog-editor .ql-editor.ql-blank::before{color:#9ca3af;font-style:normal}.blog-editor .ql-toolbar{border:none;border-bottom:1px solid#e5e7eb;background:#f9fafb}.blog-editor .ql-container{border:none}.blog-editor .ql-editor img{max-width:100%;height:auto;display:block;margin:16px 0}.quill-wrapper{background:white}'})]})}},4320:(e,t,l)=>{Promise.resolve().then(l.bind(l,3771))}},e=>{e.O(0,[691,128,441,255,358],()=>e(e.s=4320)),_N_E=e.O()}]);