(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[238],{63:(e,a,t)=>{"use strict";var l=t(7260);t.o(l,"useParams")&&t.d(a,{useParams:function(){return l.useParams}}),t.o(l,"usePathname")&&t.d(a,{usePathname:function(){return l.usePathname}})},330:(e,a,t)=>{Promise.resolve().then(t.bind(t,5874))},5874:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>c});var l=t(5155),r=t(8661),s=t.n(r),i=t(2115),o=t(63),d=t(7909);t(1736);let n=(0,d.default)(()=>Promise.all([t.e(692),t.e(627)]).then(t.t.bind(t,1720,23)),{loadableGenerated:{webpack:()=>[1720]},ssr:!1});function c(){let[e,a]=(0,i.useState)(""),[t,r]=(0,i.useState)(""),[d,c]=(0,i.useState)(""),[b,u]=(0,i.useState)(!0),[m,h]=(0,i.useState)(!1),x=(0,i.useRef)(null),g=(0,o.useParams)().slug;(0,i.useEffect)(()=>{g&&(async()=>{try{let e=await fetch("/api/blog/".concat(g));if(e.ok){let t=await e.json();a(t.post.title),r(t.post.content)}else c("❌ 게시글을 불러오는데 실패했습니다.")}catch(e){c("❌ 오류 발생")}finally{u(!1)}})()},[g]);let p={toolbar:{container:[[{header:[1,2,3,4,5,6,!1]}],[{font:[]}],[{size:["small",!1,"large","huge"]}],["bold","italic","underline","strike"],[{color:[]},{background:[]}],[{script:"sub"},{script:"super"}],[{list:"ordered"},{list:"bullet"}],[{indent:"-1"},{indent:"+1"}],[{align:[]}],["blockquote","code-block"],["link","image","video"],["clean"]],handlers:{image:()=>{let e=document.createElement("input");e.setAttribute("type","file"),e.setAttribute("accept","image/*"),e.click(),e.onchange=async()=>{var a;let t=null==(a=e.files)?void 0:a[0];if(!t)return;let l=new FileReader;l.onload=()=>{var e;let a=null==(e=x.current)?void 0:e.getEditor(),t=null==a?void 0:a.getSelection();t&&l.result&&a.insertEmbed(t.index,"image",l.result)},l.readAsDataURL(t)}}}},clipboard:{matchVisual:!1}},f=async a=>{if(a.preventDefault(),!e.trim())return void alert("제목을 입력해주세요.");if(!t.trim()||"<p><br></p>"===t)return void alert("내용을 입력해주세요.");h(!0),c("수정 중...");try{(await fetch("/api/blog/".concat(g),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:e,content:t})})).ok?(c("✅ 게시글이 수정되었습니다!"),setTimeout(()=>{window.location.href="/blog/".concat(g)},1500)):(c("❌ 수정 실패"),h(!1))}catch(e){c("❌ 오류 발생"),h(!1)}};return b?(0,l.jsx)("div",{className:"text-center py-20",children:"게시글을 불러오는 중..."}):(0,l.jsxs)("div",{className:"jsx-da5d1147a86bca0 min-h-screen bg-gray-50",children:[(0,l.jsx)("div",{className:"jsx-da5d1147a86bca0 bg-white border-b border-gray-200 sticky top-0 z-50 shadow-sm",children:(0,l.jsx)("div",{className:"jsx-da5d1147a86bca0 max-w-7xl mx-auto px-4 py-3",children:(0,l.jsxs)("div",{className:"jsx-da5d1147a86bca0 flex items-center justify-between",children:[(0,l.jsx)("a",{href:"/blog/".concat(g),className:"jsx-da5d1147a86bca0 text-gray-600 hover:text-gray-900 transition-colors",children:"← 게시글로 돌아가기"}),(0,l.jsxs)("div",{className:"jsx-da5d1147a86bca0 flex items-center gap-3",children:[d&&(0,l.jsx)("span",{className:"jsx-da5d1147a86bca0 text-sm text-gray-600",children:d}),(0,l.jsx)("button",{onClick:f,disabled:m,className:"jsx-da5d1147a86bca0 px-6 py-2 text-sm font-medium text-white bg-green-600 hover:bg-green-700 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"수정하기"})]})]})})}),(0,l.jsx)("div",{className:"jsx-da5d1147a86bca0 max-w-5xl mx-auto px-4 py-8",children:(0,l.jsxs)("div",{className:"jsx-da5d1147a86bca0 bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[(0,l.jsx)("div",{className:"jsx-da5d1147a86bca0 border-b border-gray-200",children:(0,l.jsx)("input",{type:"text",value:e,onChange:e=>a(e.target.value),placeholder:"제목을 입력하세요",disabled:m,className:"jsx-da5d1147a86bca0 w-full px-6 py-4 text-3xl font-bold border-none focus:outline-none focus:ring-0 placeholder-gray-300"})}),(0,l.jsx)("div",{className:"jsx-da5d1147a86bca0 quill-wrapper",children:(0,l.jsx)(n,{ref:x,theme:"snow",value:t,onChange:r,modules:p,formats:["header","font","size","bold","italic","underline","strike","color","background","script","list","bullet","indent","align","blockquote","code-block","link","image","video"],placeholder:"이야기를 시작하세요...",className:"blog-editor"})})]})}),(0,l.jsx)(s(),{id:"da5d1147a86bca0",children:".blog-editor .ql-container{min-height:500px;font-size:16px}.blog-editor .ql-editor{min-height:500px;padding:24px}.blog-editor .ql-editor.ql-blank::before{color:#9ca3af;font-style:normal}.blog-editor .ql-toolbar{border-bottom:1px solid#e5e7eb;background:#f9fafb}.blog-editor .ql-container{border:none}.blog-editor .ql-editor img{max-width:100%;height:auto;display:block;margin:16px 0}.quill-wrapper{background:white}"})]})}}},e=>{e.O(0,[691,128,441,255,358],()=>e(e.s=330)),_N_E=e.O()}]);