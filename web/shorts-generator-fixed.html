<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ¬ ì‡¼ì¸  ìƒì„±ê¸° - ìˆ˜ì • ë²„ì „</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .card-hover {
            transition: all 0.3s ease;
        }
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        .generating {
            animation: pulse 1.5s infinite;
        }
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
    <!-- í†µí•© ë„¤ë¹„ê²Œì´ì…˜ ë¡œë“œ -->
    <div id="navigation-container"></div>

    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- í—¤ë” -->
        <div class="gradient-bg rounded-xl shadow-xl p-8 mb-8 text-white">
            <div class="text-center">
                <h1 class="text-4xl font-bold mb-3">ğŸ¬ ì‡¼ì¸  ìƒì„±ê¸°</h1>
                <p class="text-xl opacity-90">AI ê¸°ë°˜ ì‡¼ì¸  ì½˜í…ì¸  ìƒì„± (í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ ë²„ì „)</p>
            </div>
        </div>

        <!-- ë©”ì¸ ì»¨í…ì¸  -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <!-- ì…ë ¥ íŒ¨ë„ -->
            <div class="bg-white rounded-xl shadow-lg p-6 card-hover">
                <h3 class="text-xl font-bold mb-4">ì‡¼ì¸  ìƒì„± ì˜µì…˜</h3>

                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">í‚¤ì›Œë“œ ë˜ëŠ” í”„ë¡¬í”„íŠ¸</label>
                        <input
                            type="text"
                            id="keywordsInput"
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                            placeholder="ì˜ˆ: ìš´ë™ ë£¨í‹´, ìš”ë¦¬ ë ˆì‹œí”¼"
                        >
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">ìƒì„± ëª¨ë“œ</label>
                        <select id="modeSelect" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                            <option value="keyword">í‚¤ì›Œë“œ ê¸°ë°˜</option>
                            <option value="prompt">í”„ë¡¬í”„íŠ¸ ê¸°ë°˜</option>
                        </select>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">ì˜ìƒ ê¸¸ì´ (ì´ˆ)</label>
                        <select id="durationSelect" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                            <option value="30">30ì´ˆ</option>
                            <option value="45">45ì´ˆ</option>
                            <option value="60">60ì´ˆ</option>
                        </select>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">ì¥ë©´ ìˆ˜</label>
                        <input
                            type="number"
                            id="sceneCountInput"
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg"
                            value="5"
                            min="3"
                            max="8"
                        >
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">ì´ë¯¸ì§€ ìŠ¤íƒ€ì¼</label>
                        <select id="imageStyleSelect" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                            <option value="ì‹¤ì‚¬">ì‹¤ì‚¬</option>
                            <option value="ì• ë‹ˆë©”ì´ì…˜">ì• ë‹ˆë©”ì´ì…˜</option>
                            <option value="3D ë Œë”">3D ë Œë”</option>
                            <option value="íŒíƒ€ì§€ ì•„íŠ¸">íŒíƒ€ì§€ ì•„íŠ¸</option>
                            <option value="ì˜í™”ì²˜ëŸ¼">ì˜í™”ì²˜ëŸ¼</option>
                        </select>
                    </div>
                </div>

                <button id="generateBtn" class="w-full bg-gradient-to-r from-blue-500 to-purple-600 text-white px-6 py-4 rounded-xl font-bold text-lg hover:shadow-xl transition mt-6">
                    <i class="fas fa-magic mr-2"></i>ì‡¼ì¸  ìƒì„±í•˜ê¸°
                </button>
            </div>

            <!-- ê²°ê³¼ íŒ¨ë„ -->
            <div class="bg-white rounded-xl shadow-lg p-6 card-hover">
                <h3 class="text-xl font-bold mb-4">ìƒì„± ê²°ê³¼</h3>

                <div id="resultContainer">
                    <!-- ë¡œë”© ìƒíƒœ -->
                    <div id="loadingState" class="hidden">
                        <div class="text-center py-8">
                            <div class="inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"></div>
                            <p class="mt-4 text-gray-600">ì‡¼ì¸  ìƒì„± ì¤‘...</p>
                            <div id="progressBar" class="w-full bg-gray-200 rounded-full h-2 mt-4">
                                <div id="progressFill" class="bg-blue-500 h-2 rounded-full transition-all duration-300" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>

                    <!-- ê²°ê³¼ í‘œì‹œ -->
                    <div id="resultDisplay" class="hidden">
                        <div class="space-y-4">
                            <!-- ìŠ¤í¬ë¦½íŠ¸ -->
                            <div>
                                <h4 class="font-semibold mb-2">ìƒì„±ëœ ìŠ¤í¬ë¦½íŠ¸</h4>
                                <div class="bg-gray-50 p-4 rounded-lg">
                                    <p id="scriptResult" class="text-gray-700"></p>
                                </div>
                            </div>

                            <!-- ì¥ë©´ -->
                            <div>
                                <h4 class="font-semibold mb-2">ìƒì„±ëœ ì¥ë©´</h4>
                                <div id="scenesContainer" class="space-y-2">
                                    <!-- ì¥ë©´ì´ ì—¬ê¸°ì— í‘œì‹œë¨ -->
                                </div>
                            </div>

                            <!-- ì‘ì—… ë²„íŠ¼ -->
                            <div class="flex space-x-3">
                                <button id="downloadBtn" class="flex-1 bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition">
                                    <i class="fas fa-download mr-2"></i>ë‹¤ìš´ë¡œë“œ
                                </button>
                                <button id="shareBtn" class="flex-1 bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition">
                                    <i class="fas fa-share mr-2"></i>ê³µìœ 
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- ì´ˆê¸° ìƒíƒœ -->
                    <div id="initialState">
                        <div class="text-center py-12 text-gray-500">
                            <i class="fas fa-film text-6xl mb-4"></i>
                            <p>ì‡¼ì¸  ìƒì„± ë²„íŠ¼ì„ ëˆŒëŸ¬ ì‹œì‘í•˜ì„¸ìš”</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ë„¤ë¹„ê²Œì´ì…˜ ë¡œë“œ ìŠ¤í¬ë¦½íŠ¸ -->
    <script src="script.js"></script>

    <script>
        // í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ ì‡¼ì¸  ìƒì„± (API í˜¸ì¶œ ì—†ì´)
        class ShortsGenerator {
            constructor() {
                this.initializeElements();
                this.bindEvents();
            }

            initializeElements() {
                this.elements = {
                    keywordsInput: document.getElementById('keywordsInput'),
                    modeSelect: document.getElementById('modeSelect'),
                    durationSelect: document.getElementById('durationSelect'),
                    sceneCountInput: document.getElementById('sceneCountInput'),
                    imageStyleSelect: document.getElementById('imageStyleSelect'),
                    generateBtn: document.getElementById('generateBtn'),
                    loadingState: document.getElementById('loadingState'),
                    resultDisplay: document.getElementById('resultDisplay'),
                    initialState: document.getElementById('initialState'),
                    scriptResult: document.getElementById('scriptResult'),
                    scenesContainer: document.getElementById('scenesContainer'),
                    progressFill: document.getElementById('progressFill'),
                    downloadBtn: document.getElementById('downloadBtn'),
                    shareBtn: document.getElementById('shareBtn')
                };
            }

            bindEvents() {
                this.elements.generateBtn.addEventListener('click', () => this.generateShorts());
                this.elements.downloadBtn.addEventListener('click', () => this.downloadResults());
                this.elements.shareBtn.addEventListener('click', () => this.shareResults());
            }

            async generateShorts() {
                const keywords = this.elements.keywordsInput.value.trim();
                if (!keywords) {
                    alert('í‚¤ì›Œë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                    return;
                }

                // ë¡œë”© ìƒíƒœ í‘œì‹œ
                this.showLoading();
                this.elements.generateBtn.disabled = true;
                this.elements.generateBtn.classList.add('generating');
                this.elements.generateBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>ìƒì„± ì¤‘...';

                try {
                    // í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ì§ì ‘ ìƒì„± (API í˜¸ì¶œ ì—†ì´)
                    await this.simulateGeneration();

                    // ê²°ê³¼ í‘œì‹œ
                    this.showResults();
                } catch (error) {
                    console.error('ìƒì„± ì˜¤ë¥˜:', error);
                    alert('ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                } finally {
                    this.elements.generateBtn.disabled = false;
                    this.elements.generateBtn.classList.remove('generating');
                    this.elements.generateBtn.innerHTML = '<i class="fas fa-magic mr-2"></i>ì‡¼ì¸  ìƒì„±í•˜ê¸°';
                }
            }

            async simulateGeneration() {
                const keywords = this.elements.keywordsInput.value;
                const mode = this.elements.modeSelect.value;
                const duration = parseInt(this.elements.durationSelect.value);
                const sceneCount = parseInt(this.elements.sceneCountInput.value);
                const imageStyle = this.elements.imageStyleSelect.value;

                // ìŠ¤í¬ë¦½íŠ¸ ìƒì„± (ì‹œë®¬ë ˆì´ì…˜)
                await this.updateProgress(20, 'ìŠ¤í¬ï¿½ë¦½íŠ¸ ìƒì„± ì¤‘...');
                const script = this.generateScript(keywords, mode, duration);

                // ì¥ë©´ ìƒì„± (ì‹œë®¬ë ˆì´ì…˜)
                await this.updateProgress(60, 'ì¥ë©´ ìƒì„± ì¤‘...');
                const scenes = this.generateScenes(script, sceneCount, imageStyle);

                // ì´ë¯¸ì§€ ìƒì„± (ì‹œë®¬ë ˆì´ì…˜)
                await this.updateProgress(90, 'ì´ë¯¸ì§€ ìƒì„± ì¤‘...');
                scenes.forEach(scene => {
                    scene.imageUrl = `https://picsum.photos/seed/${scene.keyword}/400/300.jpg`;
                });

                // ì™„ë£Œ
                await this.updateProgress(100, 'ì™„ë£Œ!');

                // ê²°ê³¼ ì €ì¥
                this.currentResult = {
                    script,
                    scenes,
                    metadata: {
                        keywords,
                        mode,
                        duration,
                        sceneCount,
                        imageStyle,
                        createdAt: new Date().toISOString()
                    }
                };
            }

            generateScript(keywords, mode, duration) {
                const scripts = {
                    keyword: `ğŸ¬ ${keywords}ì— ëŒ€í•œ ì§§ì€ ì˜ìƒì…ë‹ˆë‹¤.\n\nì²« ë²ˆì§¸ ì¥ë©´: ${keywords}ì˜ ê¸°ë³¸ ê°œë…ì„ ì†Œê°œí•©ë‹ˆë‹¤.\në‘ ë²ˆì§¸ ì¥ë©´: ì‹¤ì œ ì ìš© ë°©ë²•ì„ ë³´ì—¬ì¤ë‹ˆë‹¤.\nì„¸ ë²ˆì§¸ ì¥ë©´: íŒê³¼ ìš”ë ¹ì„ ê³µìœ í•©ë‹ˆë‹¤.\në§ˆì§€ë§‰ ì¥ë©´: ìš”ì•½ ë° ë§ˆë¬´ë¦¬.`,

                    prompt: `ğŸ¬ "${keywords}" ì£¼ì œë¡œ ì°½ì˜ì ì¸ ì‡¼ì¸  ì˜ìƒì…ë‹ˆë‹¤.\n\në„ì…ë¶€: ì‹œì²­ìì˜ ê´€ì‹¬ì„ ë„ëŠ” í¥ë¯¸ë¡œìš´ ì‹œì‘.\nì „ê°œë¶€: ì£¼ì œì— ëŒ€í•œ ê¹Šì´ ìˆëŠ” íƒêµ¬.\nì ˆì •ë¶€: ê¸´ì¥ê° ë„˜ì¹˜ëŠ” í•˜ì´ë¼ì´íŠ¸.\nê²°ë§ë¶€: ì—¬ìš´ì„ ë‚¨ê¸°ëŠ” ë§ˆë¬´ë¦¬.`
                };

                return scripts[mode] || scripts.keyword;
            }

            generateScenes(script, sceneCount, imageStyle) {
                const sceneTemplates = [
                    { keyword: 'intro', description: 'í¥ë¯¸ë¡œìš´ ë„ì… ì¥ë©´' },
                    { keyword: 'main', description: 'ì£¼ìš” ë‚´ìš© ì „ê°œ' },
                    { keyword: 'detail', description: 'ìƒì„¸í•œ ì„¤ëª…' },
                    { keyword: 'example', description: 'ì‹¤ì œ ì˜ˆì‹œ' },
                    { keyword: 'tip', description: 'ìœ ìš©í•œ íŒ' },
                    { keyword: 'conclusion', description: 'ë§ˆë¬´ë¦¬ ì •ë¦¬' },
                    { keyword: 'action', description: 'ì‹¤ì²œ í–‰ë™' },
                    { keyword: 'result', description: 'ê¸°ëŒ€ ê²°ê³¼' }
                ];

                return Array.from({ length: Math.min(sceneCount, sceneTemplates.length) }, (_, i) => ({
                    id: i + 1,
                    ...sceneTemplates[i],
                    duration: Math.floor(60 / sceneCount), // ê· ë“± ë¶„ë°°
                    style: imageStyle
                }));
            }

            async updateProgress(percent, message) {
                this.elements.progressFill.style.width = `${percent}%`;
                await new Promise(resolve => setTimeout(resolve, 500 + Math.random() * 1000));
            }

            showLoading() {
                this.elements.initialState.classList.add('hidden');
                this.elements.resultDisplay.classList.add('hidden');
                this.elements.loadingState.classList.remove('hidden');
                this.elements.progressFill.style.width = '0%';
            }

            showResults() {
                this.elements.loadingState.classList.add('hidden');
                this.elements.resultDisplay.classList.remove('hidden');

                // ìŠ¤í¬ë¦½íŠ¸ í‘œì‹œ
                this.elements.scriptResult.textContent = this.currentResult.script;

                // ì¥ë©´ í‘œì‹œ
                this.elements.scenesContainer.innerHTML = this.currentResult.scenes.map(scene => `
                    <div class="flex items-center space-x-3 p-3 bg-gray-50 rounded-lg">
                        <img src="${scene.imageUrl}" alt="${scene.description}" class="w-20 h-20 object-cover rounded">
                        <div class="flex-1">
                            <div class="font-semibold">ì¥ë©´ ${scene.id}: ${scene.description}</div>
                            <div class="text-sm text-gray-600">ê¸¸ì´: ${scene.duration}ì´ˆ | ìŠ¤íƒ€ì¼: ${scene.style}</div>
                        </div>
                    </div>
                `).join('');
            }

            downloadResults() {
                if (!this.currentResult) return;

                const data = {
                    script: this.currentResult.script,
                    scenes: this.currentResult.scenes,
                    metadata: this.currentResult.metadata
                };

                const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `shorts-${Date.now()}.json`;
                a.click();
                URL.revokeObjectURL(url);
            }

            shareResults() {
                if (!this.currentResult) return;

                const shareText = `ğŸ¬ "${this.currentResult.metadata.keywords}" ì£¼ì œì˜ ì‡¼ì¸ ë¥¼ ìƒì„±í–ˆìŠµë‹ˆë‹¤!\n\n${this.currentResult.script.substring(0, 100)}...`;

                if (navigator.share) {
                    navigator.share({
                        title: 'AI ì‡¼ì¸  ìƒì„± ê²°ê³¼',
                        text: shareText
                    });
                } else {
                    navigator.clipboard.writeText(shareText);
                    alert('ê²°ê³¼ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
                }
            }
        }

        // ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', () => {
            new ShortsGenerator();
        });
    </script>
</body>
</html>