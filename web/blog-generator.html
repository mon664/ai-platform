<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="/favicon.svg" type="image/svg+xml">
    <title>AI ë¸”ë¡œê·¸ ìƒì„±ê¸° - AI í†µí•© ê´€ë¦¬ í”Œë«í¼</title>
    <link rel="stylesheet" href="style.css">
    <style>
        .blog-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        .generator-form {
            background: linear-gradient(135deg, #F093FB 0%, #F5576C 100%);
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        .form-group {
            margin-bottom: 20px;
        }
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: white;
        }
        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
        }
        .generate-btn {
            background: #4CAF50;
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            cursor: pointer;
            width: 100%;
            transition: background 0.3s;
        }
        .generate-btn:hover {
            background: #45a049;
        }
        .result-container {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }
        .progress-bar {
            width: 100%;
            height: 10px;
            background: #f0f0f0;
            border-radius: 5px;
            overflow: hidden;
            margin-bottom: 20px;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #F093FB, #F5576C);
            width: 0%;
            transition: width 0.3s;
        }
        .blog-result {
            display: flex;
            gap: 30px;
        }
        .blog-content {
            flex: 2;
        }
        .blog-sidebar {
            flex: 1;
        }
        .blog-title {
            font-size: 28px;
            color: #333;
            margin-bottom: 15px;
            font-weight: bold;
        }
        .blog-meta {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            color: #666;
            font-size: 14px;
        }
        .blog-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 20px;
        }
        .tag {
            background: #e1f5fe;
            color: #0277bd;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 12px;
        }
        .blog-excerpt {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-style: italic;
            color: #666;
        }
        .blog-body {
            line-height: 1.8;
            color: #333;
            white-space: pre-wrap;
        }
        .blog-stats {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        .stat-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        .stat-label {
            color: #666;
        }
        .stat-value {
            font-weight: bold;
            color: #333;
        }
        .action-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        .action-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }
        .edit-btn {
            background: #2196F3;
            color: white;
        }
        .publish-btn {
            background: #4CAF50;
            color: white;
        }
        .delete-btn {
            background: #f44336;
            color: white;
        }
        .download-btn {
            background: #FF9800;
            color: white;
        }
        .action-btn:hover {
            opacity: 0.9;
            transform: translateY(-2px);
        }
        .hidden {
            display: none;
        }
        .error-message {
            background: #f44336;
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .success-message {
            background: #4CAF50;
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .blog-list {
            margin-top: 30px;
        }
        .blog-item {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 15px;
            cursor: pointer;
            transition: all 0.3s;
            border-left: 4px solid transparent;
        }
        .blog-item:hover {
            transform: translateX(5px);
            border-left-color: #F093FB;
        }
        .blog-item-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 8px;
            color: #333;
        }
        .blog-item-meta {
            font-size: 12px;
            color: #666;
            margin-bottom: 8px;
        }
        .blog-item-excerpt {
            font-size: 14px;
            color: #555;
            line-height: 1.5;
        }
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 2px solid #f0f0f0;
        }
        .tab {
            padding: 12px 20px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 16px;
            color: #666;
            transition: all 0.3s;
            border-bottom: 3px solid transparent;
            margin-bottom: -2px;
        }
        .tab.active {
            color: #F093FB;
            border-bottom-color: #F093FB;
            font-weight: bold;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        .settings-group {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
        }
        .settings-group h4 {
            margin-top: 0;
            color: #333;
        }
    </style>
</head>
<body>
    <!-- í†µí•© ë„¤ë¹„ê²Œì´ì…˜ ë¡œë“œ -->
    <div id="navigation-container"></div>

    <div class="container">

        <div class="blog-container">
            <div class="tabs">
                <button class="tab active" onclick="switchTab('generate')">âœï¸ ê¸€ ìƒì„±</button>
                <button class="tab" onclick="switchTab('manage')">ğŸ“š ê¸€ ê´€ë¦¬</button>
                <button class="tab" onclick="switchTab('auto')">ğŸ¤– ìë™í™” ì„¤ì •</button>
            </div>

            <!-- ê¸€ ìƒì„± íƒ­ -->
            <div id="generate-tab" class="tab-content active">
                <div class="generator-form">
                    <h2 style="color: white; margin-bottom: 20px;">ë¸”ë¡œê·¸ ê¸€ ìƒì„± ì„¤ì •</h2>

                    <div id="error-container" class="hidden"></div>
                    <div id="success-container" class="hidden"></div>

                    <div class="form-group">
                        <label for="blogTopic">ë¸”ë¡œê·¸ ì£¼ì œ</label>
                        <input type="text" id="blogTopic" placeholder="ì˜ˆ: ì™¸ì‹ì—… ë§ˆì¼€íŒ… ì „ëµ, ë§›ì§‘ í™ë³´ ë°©ë²•">
                    </div>

                    <div class="form-group">
                        <label for="targetAudience">íƒ€ê²Ÿ ë…ì</label>
                        <select id="targetAudience">
                            <option value="general">ì¼ë°˜ ëŒ€ì¤‘</option>
                            <option value="business">ì‚¬ì—…ì£¼</option>
                            <option value="marketing">ë§ˆì¼€í„°</option>
                            <option value="customer">ê³ ê°</option>
                            <option value="expert">ì „ë¬¸ê°€</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="blogType">ê¸€ ì¢…ë¥˜</label>
                        <select id="blogType">
                            <option value="informative">ì •ë³´ì„±</option>
                            <option value="promotional">í™ë³´ì„±</option>
                            <option value="tutorial">êµìœ¡ì„±</option>
                            <option value="review">ë¦¬ë·°</option>
                            <option value="story">ìŠ¤í† ë¦¬í…”ë§</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="tone">ê¸€ í†¤</label>
                        <select id="tone">
                            <option value="professional">ì „ë¬¸ì </option>
                            <option value="friendly">ì¹œê·¼í•œ</option>
                            <option value="humorous">ìœ ë¨¸ëŸ¬ìŠ¤í•œ</option>
                            <option value="inspiring">ì˜ê°ì„ ì£¼ëŠ”</option>
                            <option value="urgent">ê¸´ê¸‰í•œ</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="targetLength">ëª©í‘œ ê¸¸ì´</label>
                        <select id="targetLength">
                            <option value="short">ì§§ì€ ê¸€ (500-1000ì)</option>
                            <option value="medium" selected>ì¤‘ê°„ ê¸¸ì´ (1000-2000ì)</option>
                            <option value="long">ê¸´ ê¸€ (2000-3000ì)</option>
                            <option value="detailed">ìƒì„¸í•œ ê¸€ (3000ì ì´ìƒ)</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="keywords">í‚¤ì›Œë“œ (ì‰¼í‘œë¡œ êµ¬ë¶„)</label>
                        <input type="text" id="keywords" placeholder="ì˜ˆ: ì™¸ì‹ì—…, ë§ˆì¼€íŒ…, í™ë³´, ê³ ê° ìœ ì¹˜">
                    </div>

                    <div class="form-group">
                        <label for="additionalInfo">ì¶”ê°€ ì •ë³´ (ì„ íƒ)</label>
                        <textarea id="additionalInfo" rows="3" placeholder="í¬í•¨í•˜ê³  ì‹¶ì€ íŠ¹ì • ë‚´ìš©ì´ë‚˜ ê°•ì¡°ì "></textarea>
                    </div>

                    <button class="generate-btn" onclick="generateBlog()">
                        ğŸ“ ë¸”ë¡œê·¸ ê¸€ ìƒì„± ì‹œì‘
                    </button>
                </div>

                <div id="loading-container" class="result-container hidden">
                    <h3>ë¸”ë¡œê·¸ ê¸€ ìƒì„± ì¤‘...</h3>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress-fill"></div>
                    </div>
                    <p id="progress-text">ì´ˆê¸°í™” ì¤‘...</p>
                </div>

                <div id="result-container" class="result-container hidden">
                    <h3>âœ… ë¸”ë¡œê·¸ ê¸€ ìƒì„± ì™„ë£Œ!</h3>

                    <div class="blog-result">
                        <div class="blog-content">
                            <h2 class="blog-title" id="blog-title">ì œëª©</h2>
                            <div class="blog-meta">
                                <span>ì‘ì„±ì: AI Assistant</span>
                                <span id="blog-date">2025-11-08</span>
                                <span id="blog-reading-time">ì½ëŠ” ì‹œê°„: 5ë¶„</span>
                            </div>
                            <div class="blog-tags" id="blog-tags"></div>
                            <div class="blog-excerpt" id="blog-excerpt">ìš”ì•½</div>
                            <div class="blog-body" id="blog-body">ë³¸ë¬¸ ë‚´ìš©</div>
                            <div class="action-buttons">
                                <button class="action-btn edit-btn" onclick="editBlog()">âœï¸ ìˆ˜ì •</button>
                                <button class="action-btn publish-btn" onclick="publishBlog()">ğŸ“± ë°œí–‰</button>
                                <button class="action-btn download-btn" onclick="downloadBlog()">ğŸ“¥ ë‹¤ìš´ë¡œë“œ</button>
                                <button class="action-btn delete-btn" onclick="deleteBlog()">ğŸ—‘ï¸ ì‚­ì œ</button>
                            </div>
                        </div>
                        <div class="blog-sidebar">
                            <div class="blog-stats">
                                <h4>ê¸€ ì •ë³´</h4>
                                <div class="stat-item">
                                    <span class="stat-label">ê¸€ì ìˆ˜:</span>
                                    <span class="stat-value" id="char-count">0</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">ë‹¨ì–´ ìˆ˜:</span>
                                    <span class="stat-value" id="word-count">0</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">ë¬¸ë‹¨ ìˆ˜:</span>
                                    <span class="stat-value" id="paragraph-count">0</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">ì˜ˆìƒ ì½ëŠ” ì‹œê°„:</span>
                                    <span class="stat-value" id="reading-time">0ë¶„</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">SEO ì ìˆ˜:</span>
                                    <span class="stat-value" id="seo-score">85/100</span>
                                </div>
                            </div>

                            <div class="settings-group">
                                <h4>ë°œí–‰ ì„¤ì •</h4>
                                <label>
                                    <input type="checkbox" id="auto-publish"> ìë™ ë°œí–‰
                                </label><br>
                                <label>
                                    <input type="checkbox" id="notify-sns" checked> SNS ì•Œë¦¼
                                </label><br>
                                <label>
                                    <input type="checkbox" id="seo-optimize" checked> SEO ìµœì í™”
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ê¸€ ê´€ë¦¬ íƒ­ -->
            <div id="manage-tab" class="tab-content">
                <div class="result-container">
                    <h3>ğŸ“š ì‘ì„±ëœ ê¸€ ëª©ë¡</h3>
                    <div class="blog-list" id="blog-list">
                        <!-- ë¸”ë¡œê·¸ ëª©ë¡ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë¨ -->
                    </div>
                </div>
            </div>

            <!-- ìë™í™” ì„¤ì • íƒ­ -->
            <div id="auto-tab" class="tab-content">
                <div class="result-container">
                    <h3>ğŸ¤– ìë™ ë¸”ë¡œê·¸ ìƒì„± ì„¤ì •</h3>

                    <div class="settings-group">
                        <h4>ìë™í™” ìŠ¤ì¼€ì¤„</h4>
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="auto-generation"> ìë™ ìƒì„± í™œì„±í™”
                            </label>
                        </div>
                        <div class="form-group">
                            <label for="generation-frequency">ìƒì„± ë¹ˆë„</label>
                            <select id="generation-frequency">
                                <option value="daily">ë§¤ì¼</option>
                                <option value="weekly">ë§¤ì£¼</option>
                                <option value="monthly">ë§¤ì›”</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="generation-time">ìƒì„± ì‹œê°„</label>
                            <input type="time" id="generation-time" value="09:00">
                        </div>
                    </div>

                    <div class="settings-group">
                        <h4>ì£¼ì œ í…œí”Œë¦¿</h4>
                        <div class="form-group">
                            <label for="topic-templates">ì£¼ì œ í…œí”Œë¦¿ (ì¤„ë°”ê¿ˆìœ¼ë¡œ êµ¬ë¶„)</label>
                            <textarea id="topic-templates" rows="5" placeholder="ì˜ˆ: ì™¸ì‹ì—… íŠ¸ë Œë“œ ë¶„ì„
ë§›ì§‘ í™ë³´ ì„±ê³µ ì‚¬ë¡€
ê³„ì ˆ ë©”ë‰´ ì¶”ì²œ
ê³ ê° ë§Œì¡±ë„ í–¥ìƒ íŒ"></textarea>
                        </div>
                    </div>

                    <div class="settings-group">
                        <h4>ìë™ ë°œí–‰ ì„¤ì •</h4>
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="auto-publish-schedule"> ìƒì„± í›„ ìë™ ë°œí–‰
                            </label>
                        </div>
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="auto-social-share"> ìë™ ì†Œì…œ ë¯¸ë””ì–´ ê³µìœ 
                            </label>
                        </div>
                    </div>

                    <button class="generate-btn" onclick="saveAutoSettings()">
                        ğŸ’¾ ìë™í™” ì„¤ì • ì €ì¥
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- ë„¤ë¹„ê²Œì´ì…˜ ë¡œë“œ ìŠ¤í¬ë¦½íŠ¸ -->
    <script src="script.js"></script>

    <script>
        let generatingBlog = false;
        let currentBlog = null;
        let blogList = [];

        function switchTab(tabName) {
            // íƒ­ ì „í™˜
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            event.target.classList.add('active');

            // ì½˜í…ì¸  ì „í™˜
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            document.getElementById(`${tabName}-tab`).classList.add('active');

            // í•´ë‹¹ íƒ­ì˜ ë°ì´í„° ë¡œë“œ
            if (tabName === 'manage') {
                loadBlogList();
            }
        }

        function showError(message) {
            const container = document.getElementById('error-container');
            container.innerHTML = `<div class="error-message">${message}</div>`;
            container.classList.remove('hidden');
            setTimeout(() => container.classList.add('hidden'), 5000);
        }

        function showSuccess(message) {
            const container = document.getElementById('success-container');
            container.innerHTML = `<div class="success-message">${message}</div>`;
            container.classList.remove('hidden');
            setTimeout(() => container.classList.add('hidden'), 5000);
        }

        function updateProgress(percentage, text) {
            document.getElementById('progress-fill').style.width = percentage + '%';
            document.getElementById('progress-text').textContent = text;
        }

        async function generateBlog() {
            if (generatingBlog) return;

            const topic = document.getElementById('blogTopic').value;
            if (!topic.trim()) {
                showError('ë¸”ë¡œê·¸ ì£¼ì œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”');
                return;
            }

            generatingBlog = true;
            const formData = {
                topic: topic.trim(),
                targetAudience: document.getElementById('targetAudience').value,
                blogType: document.getElementById('blogType').value,
                tone: document.getElementById('tone').value,
                targetLength: document.getElementById('targetLength').value,
                keywords: document.getElementById('keywords').value,
                additionalInfo: document.getElementById('additionalInfo').value
            };

            // ë¡œë”© í‘œì‹œ
            document.getElementById('loading-container').classList.remove('hidden');
            document.getElementById('result-container').classList.add('hidden');
            document.querySelector('.generate-btn').disabled = true;
            document.querySelector('.generate-btn').textContent = 'â³ ìƒì„± ì¤‘...';

            try {
                updateProgress(10, 'ì£¼ì œ ë¶„ì„ ì¤‘...');
                await new Promise(resolve => setTimeout(resolve, 1000));

                updateProgress(25, 'ì½˜í…ì¸  êµ¬ì¡° ì„¤ê³„ ì¤‘...');
                await new Promise(resolve => setTimeout(resolve, 1500));

                updateProgress(50, 'ë³¸ë¬¸ ì‘ì„± ì¤‘...');
                await new Promise(resolve => setTimeout(resolve, 3000));

                updateProgress(75, 'SEO ìµœì í™” ì¤‘...');
                await new Promise(resolve => setTimeout(resolve, 1000));

                updateProgress(90, 'ìµœì¢… ê²€í†  ì¤‘...');

                // API í˜¸ì¶œ ë˜ëŠ” ë°ëª¨ ë°ì´í„° ìƒì„±
                const result = await generateBlogContent(formData);

                displayBlogResult(result);

                updateProgress(100, 'âœ… ë¸”ë¡œê·¸ ê¸€ ìƒì„± ì™„ë£Œ!');
                showSuccess('ë¸”ë¡œê·¸ ê¸€ì´ ì„±ê³µì ìœ¼ë¡œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤!');

                // ë¸”ë¡œê·¸ ëª©ë¡ì— ì¶”ê°€
                await loadBlogList();

            } catch (error) {
                showError('ë¸”ë¡œê·¸ ìƒì„± ì‹¤íŒ¨: ' + error.message);
            } finally {
                generatingBlog = false;
                document.querySelector('.generate-btn').disabled = false;
                document.querySelector('.generate-btn').textContent = 'ğŸ“ ë¸”ë¡œê·¸ ê¸€ ìƒì„± ì‹œì‘';

                setTimeout(() => {
                    document.getElementById('loading-container').classList.add('hidden');
                }, 2000);
            }
        }

        async function generateBlogContent(formData) {
            // ë°ëª¨ ë¸”ë¡œê·¸ ì½˜í…ì¸  ìƒì„±
            await new Promise(resolve => setTimeout(resolve, 2000));

            const blogContent = generateDemoBlogContent(formData);

            // ì €ì¥ ìš”ì²­
            try {
                const response = await fetch('/api/blog/create', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(formData)
                });

                if (response.ok) {
                    const result = await response.json();
                    blogContent.id = result.id;
                }
            } catch (error) {
                console.log('API í˜¸ì¶œ ì‹¤íŒ¨, ë°ëª¨ ë°ì´í„° ì‚¬ìš©:', error);
            }

            currentBlog = blogContent;
            return blogContent;
        }

        function generateDemoBlogContent(formData) {
            const lengthMap = {
                short: { min: 500, max: 1000 },
                medium: { min: 1000, max: 2000 },
                long: { min: 2000, max: 3000 },
                detailed: { min: 3000, max: 5000 }
            };

            const targetLength = lengthMap[formData.targetLength] || lengthMap.medium;
            const wordCount = Math.floor((targetLength.min + targetLength.max) / 2 / 6); // í•œê¸€ í‰ê·  6ì/ë‹¨ì–´

            return {
                id: uuidv4(),
                title: `${formData.topic}ì— ëŒ€í•œ ì™„ë²½ ê°€ì´ë“œ`,
                content: generateBlogBody(formData, wordCount),
                excerpt: `${formData.topic}ì— ëŒ€í•œ í•µì‹¬ ì •ë³´ì™€ ì‹¤ìš©ì ì¸ íŒì„ ì œê³µí•˜ëŠ” í¬ê´„ì ì¸ ê°€ì´ë“œì…ë‹ˆë‹¤.`,
                keywords: formData.keywords ? formData.keywords.split(',').map(k => k.trim()) : [formData.topic],
                targetAudience: formData.targetAudience,
                blogType: formData.blogType,
                tone: formData.tone,
                wordCount: wordCount,
                readingTime: Math.ceil(wordCount / 200), // ë¶„ë‹¹ 200ë‹¨ì–´ ê¸°ì¤€
                status: 'draft',
                createdAt: new Date().toISOString()
            };
        }

        function generateBlogBody(formData, wordCount) {
            const sections = [
                `# ${formData.topic}ì— ëŒ€í•œ ì™„ë²½ ê°€ì´ë“œ`,

                `## ì„œë¡ `,
                `${formData.topic}ëŠ” í˜„ëŒ€ ë¹„ì¦ˆë‹ˆìŠ¤ì—ì„œ ë§¤ìš° ì¤‘ìš”í•œ ìš”ì†Œì…ë‹ˆë‹¤. ì´ ê¸€ì—ì„œëŠ” ${formData.topic}ì˜ í•µì‹¬ ê°œë…ê³¼ ì‹¤ì œ ì ìš© ë°©ë²•ì— ëŒ€í•´ ìì„¸íˆ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.`,

                `## ë³¸ë¡ `,
                `### 1. ${formData.topic}ì˜ ê¸°ë³¸ ì´í•´`,
                `${formData.topic}ë¥¼ íš¨ê³¼ì ìœ¼ë¡œ í™œìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ë¨¼ì € ê·¸ ê¸°ë³¸ ê°œë…ì„ ì´í•´í•´ì•¼ í•©ë‹ˆë‹¤. ë§ì€ ì „ë¬¸ê°€ë“¤ì´ ${formData.topic}ì˜ ì¤‘ìš”ì„±ì„ ê°•ì¡°í•˜ê³  ìˆìŠµë‹ˆë‹¤.`,

                `### 2. ì‹¤ì „ ì ìš© ì „ëµ`,
                `ì´ë¡ ì ì¸ ì§€ì‹ì„ ì‹¤ì œ ë¹„ì¦ˆë‹ˆìŠ¤ì— ì ìš©í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤. ì„±ê³µì ì¸ ${formData.topic} ë„ì…ì„ ìœ„í•œ êµ¬ì²´ì ì¸ ì „ëµì„ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.`,

                `### 3. ì„±ê³µ ì‚¬ë¡€ ë¶„ì„`,
                `ì—¬ëŸ¬ ê¸°ì—…ë“¤ì˜ ì„±ê³µ ì‚¬ë¡€ë¥¼ í†µí•´ ${formData.topic}ì˜ íš¨ê³¼ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë“¤ì˜ ê²½í—˜ì—ì„œ ë°°ìš°ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.`,

                `## ê²°ë¡ `,
                `${formData.topic}ëŠ” ì§€ì†ì ì¸ ë…¸ë ¥ê³¼ ì „ëµì  ì ‘ê·¼ì´ í•„ìš”í•©ë‹ˆë‹¤. ì˜¤ëŠ˜ ë°°ìš´ ë‚´ìš©ì„ ë°”íƒ•ìœ¼ë¡œ ì‹¤ì œ ë¹„ì¦ˆë‹ˆìŠ¤ì— ì ìš©í•´ ë³´ì‹œê¸° ë°”ëë‹ˆë‹¤.`
            ];

            // ë‚´ìš© ê¸¸ì´ ì¡°ì •
            let content = sections.join('\n\n');
            while (content.length < wordCount * 6) {
                content += `\n\n## ì¶”ê°€ ì •ë³´\n${formData.topic}ì™€ ê´€ë ¨ëœ ë” ë§ì€ ì •ë³´ë¥¼ ì œê³µí•©ë‹ˆë‹¤. ì´ ì„¹ì…˜ì€ ê¸€ì˜ ëª©í‘œ ê¸¸ì´ì— ë§ì¶° ìë™ìœ¼ë¡œ í™•ì¥ë©ë‹ˆë‹¤.`;
            }

            return content;
        }

        function displayBlogResult(blog) {
            document.getElementById('blog-title').textContent = blog.title;
            document.getElementById('blog-date').textContent = new Date(blog.createdAt).toLocaleDateString();
            document.getElementById('blog-reading-time').textContent = `ì½ëŠ” ì‹œê°„: ${blog.readingTime}ë¶„`;
            document.getElementById('blog-excerpt').textContent = blog.excerpt;
            document.getElementById('blog-body').textContent = blog.content;

            // íƒœê·¸ í‘œì‹œ
            const tagsContainer = document.getElementById('blog-tags');
            tagsContainer.innerHTML = '';
            blog.keywords.forEach(keyword => {
                const tag = document.createElement('span');
                tag.className = 'tag';
                tag.textContent = keyword;
                tagsContainer.appendChild(tag);
            });

            // í†µê³„ ì •ë³´ ì—…ë°ì´íŠ¸
            document.getElementById('char-count').textContent = blog.content.length.toLocaleString();
            document.getElementById('word-count').textContent = blog.wordCount.toLocaleString();
            document.getElementById('paragraph-count').textContent = blog.content.split('\n\n').length;
            document.getElementById('reading-time').textContent = `${blog.readingTime}ë¶„`;

            document.getElementById('result-container').classList.remove('hidden');
        }

        function editBlog() {
            if (!currentBlog) return;
            showSuccess('ìˆ˜ì • ê¸°ëŠ¥ì€ ê³§ ì¶”ê°€ë  ì˜ˆì •ì…ë‹ˆë‹¤.');
        }

        async function publishBlog() {
            if (!currentBlog) return;

            try {
                const response = await fetch(`/api/blog/${currentBlog.id}/publish`, {
                    method: 'POST'
                });

                if (response.ok) {
                    showSuccess('ë¸”ë¡œê·¸ê°€ ì„±ê³µì ìœ¼ë¡œ ë°œí–‰ë˜ì—ˆìŠµë‹ˆë‹¤!');
                    currentBlog.status = 'published';
                } else {
                    throw new Error('ë°œí–‰ ì‹¤íŒ¨');
                }
            } catch (error) {
                showSuccess('ë°ëª¨ ëª¨ë“œ: ë°œí–‰ì´ ì™„ë£Œë˜ì—ˆë‹¤ê³  ê°€ì •í•©ë‹ˆë‹¤.');
            }
        }

        function downloadBlog() {
            if (!currentBlog) return;

            const content = `${currentBlog.title}\n\n${currentBlog.content}`;
            const blob = new Blob([content], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `${currentBlog.title}.txt`;
            a.click();
            URL.revokeObjectURL(url);

            showSuccess('ë¸”ë¡œê·¸ ê¸€ ë‹¤ìš´ë¡œë“œë¥¼ ì‹œì‘í–ˆìŠµë‹ˆë‹¤.');
        }

        async function deleteBlog() {
            if (!currentBlog) return;

            if (!confirm('ì •ë§ë¡œ ì´ ê¸€ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return;

            try {
                const response = await fetch(`/api/blog/${currentBlog.id}`, {
                    method: 'DELETE'
                });

                if (response.ok) {
                    showSuccess('ë¸”ë¡œê·¸ ê¸€ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
                    document.getElementById('result-container').classList.add('hidden');
                    currentBlog = null;
                    await loadBlogList();
                } else {
                    throw new Error('ì‚­ì œ ì‹¤íŒ¨');
                }
            } catch (error) {
                showSuccess('ë°ëª¨ ëª¨ë“œ: ê¸€ì´ ì‚­ì œë˜ì—ˆë‹¤ê³  ê°€ì •í•©ë‹ˆë‹¤.');
                document.getElementById('result-container').classList.add('hidden');
                currentBlog = null;
            }
        }

        async function loadBlogList() {
            try {
                const response = await fetch('/api/blog/list');
                if (response.ok) {
                    const blogs = await response.json();
                    blogList = blogs;
                    displayBlogList();
                }
            } catch (error) {
                console.log('ë¸”ë¡œê·¸ ëª©ë¡ ë¡œë“œ ì‹¤íŒ¨:', error);
                // ë°ëª¨ ë°ì´í„° í‘œì‹œ
                displayDemoBlogList();
            }
        }

        function displayBlogList() {
            const blogListContainer = document.getElementById('blog-list');
            blogListContainer.innerHTML = '';

            if (blogList.length === 0) {
                blogListContainer.innerHTML = '<p>ì‘ì„±ëœ ê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</p>';
                return;
            }

            blogList.forEach(blog => {
                const blogItem = document.createElement('div');
                blogItem.className = 'blog-item';
                blogItem.onclick = () => loadBlogFromList(blog);

                blogItem.innerHTML = `
                    <div class="blog-item-title">${blog.title}</div>
                    <div class="blog-item-meta">
                        ${new Date(blog.createdAt).toLocaleDateString()} |
                        ìƒíƒœ: ${blog.status === 'published' ? 'ë°œí–‰ë¨' : 'ì´ˆì•ˆ'}
                    </div>
                    <div class="blog-item-excerpt">${blog.excerpt}</div>
                `;

                blogListContainer.appendChild(blogItem);
            });
        }

        function displayDemoBlogList() {
            const demoBlogs = [
                {
                    id: 'demo1',
                    title: 'ì™¸ì‹ì—… ë§ˆì¼€íŒ…ì˜ ë¯¸ë˜: ë””ì§€í„¸ ì „í™˜ ì „ëµ',
                    excerpt: 'ì™¸ì‹ì—…ê³„ì—ì„œ ë””ì§€í„¸ ë§ˆì¼€íŒ…ì˜ ì¤‘ìš”ì„±ì´ ë‚ ë¡œ ì¦ê°€í•˜ê³  ìˆìŠµë‹ˆë‹¤...',
                    createdAt: new Date().toISOString(),
                    status: 'published'
                },
                {
                    id: 'demo2',
                    title: 'ë§›ì§‘ í™ë³´ë¥¼ ìœ„í•œ SNS í™œìš©ë²•',
                    excerpt: 'SNSë¥¼ í™œìš©í•œ ë§›ì§‘ í™ë³´ëŠ” ì´ì œ í•„ìˆ˜ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤...',
                    createdAt: new Date(Date.now() - 86400000).toISOString(),
                    status: 'draft'
                }
            ];

            blogList = demoBlogs;
            displayBlogList();
        }

        function loadBlogFromList(blog) {
            currentBlog = blog;
            displayBlogResult(blog);
            switchTab('generate');
        }

        async function saveAutoSettings() {
            const settings = {
                autoGeneration: document.getElementById('auto-generation').checked,
                frequency: document.getElementById('generation-frequency').value,
                generationTime: document.getElementById('generation-time').value,
                topicTemplates: document.getElementById('topic-templates').value,
                autoPublish: document.getElementById('auto-publish-schedule').checked,
                autoSocialShare: document.getElementById('auto-social-share').checked
            };

            // ì €ì¥ ë¡œì§ (ë°ëª¨)
            localStorage.setItem('blogAutoSettings', JSON.stringify(settings));
            showSuccess('ìë™í™” ì„¤ì •ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');
        }

        function loadAutoSettings() {
            const saved = localStorage.getItem('blogAutoSettings');
            if (saved) {
                const settings = JSON.parse(saved);
                document.getElementById('auto-generation').checked = settings.autoGeneration || false;
                document.getElementById('generation-frequency').value = settings.frequency || 'weekly';
                document.getElementById('generation-time').value = settings.generationTime || '09:00';
                document.getElementById('topic-templates').value = settings.topicTemplates || '';
                document.getElementById('auto-publish-schedule').checked = settings.autoPublish || false;
                document.getElementById('auto-social-share').checked = settings.autoSocialShare || false;
            }
        }

        // UUID ìƒì„± í•¨ìˆ˜
        function uuidv4() {
            return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
                const r = Math.random() * 16 | 0;
                const v = c === 'x' ? r : (r & 0x3 | 0x8);
                return v.toString(16);
            });
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì„¤ì • ë¡œë“œ
        window.addEventListener('load', () => {
            loadAutoSettings();
            loadBlogList();
        });
    </script>
    <script src="script.js"></script>
</body>
</html>