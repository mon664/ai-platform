<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ¤– ìë™ ë¸”ë¡œê·¸ ìƒì„±ê¸° - AI í†µí•© ê´€ë¦¬ í”Œë«í¼</title>
    <link rel="icon" href="/favicon.svg" type="image/svg+xml">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
    <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .card-hover {
            transition: all 0.3s ease;
        }
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        .loading-spinner {
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        .ql-container {
            min-height: 300px;
        }
        .cost-indicator {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- í†µí•© ë„¤ë¹„ê²Œì´ì…˜ ë¡œë“œ -->
    <div id="navigation-container"></div>

    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- í—¤ë” -->
        <div class="gradient-bg rounded-xl shadow-xl p-8 mb-8 text-white">
            <div class="text-center">
                <h1 class="text-4xl font-bold mb-3">ğŸ¤– ìë™ ë¸”ë¡œê·¸ ìƒì„±ê¸°</h1>
                <p class="text-xl opacity-90">AIê°€ ìë™ìœ¼ë¡œ ë¸”ë¡œê·¸ ì½˜í…ì¸ ë¥¼ ìƒì„±í•˜ê³  ê´€ë¦¬í•©ë‹ˆë‹¤</p>
            </div>
        </div>

        <!-- ë©”ì¸ ì»¨í…ì¸  -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- ì™¼ìª½: ì„¤ì • íŒ¨ë„ -->
            <div class="lg:col-span-1">
                <div class="bg-white rounded-xl shadow-lg p-6 card-hover mb-6">
                    <h3 class="text-xl font-bold mb-4">ğŸ“ ë¸”ë¡œê·¸ ì„¤ì •</h3>

                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">ë¸”ë¡œê·¸ ì œëª©</label>
                            <input
                                type="text"
                                id="blogTitle"
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                                placeholder="ë¸”ë¡œê·¸ ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”"
                            >
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">ì¹´í…Œê³ ë¦¬</label>
                            <select id="category" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                                <option value="marketing">ë§ˆì¼€íŒ…</option>
                                <option value="tech">ê¸°ìˆ </option>
                                <option value="lifestyle">ë¼ì´í”„ìŠ¤íƒ€ì¼</option>
                                <option value="business">ë¹„ì¦ˆë‹ˆìŠ¤</option>
                                <option value="education">êµìœ¡</option>
                            </select>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">ìƒì„± ëª¨ë“œ</label>
                            <div class="space-y-2">
                                <label class="flex items-center">
                                    <input type="radio" name="mode" value="keywords" checked class="mr-2">
                                    <span>í‚¤ì›Œë“œ ê¸°ë°˜</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="radio" name="mode" value="prompt" class="mr-2">
                                    <span>í”„ë¡¬í”„íŠ¸ ê¸°ë°˜</span>
                                </label>
                            </div>
                        </div>

                        <div id="keywordsSection">
                            <label class="block text-sm font-medium text-gray-700 mb-2">í‚¤ì›Œë“œ</label>
                            <input
                                type="text"
                                id="keywords"
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                                placeholder="ì˜ˆ: AI, ë§ˆì¼€íŒ…, ì„±ì¥"
                            >
                        </div>

                        <div id="promptSection" class="hidden">
                            <label class="block text-sm font-medium text-gray-700 mb-2">í”„ë¡¬í”„íŠ¸</label>
                            <textarea
                                id="prompt"
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                                rows="4"
                                placeholder="ìƒì„±í•  ë¸”ë¡œê·¸ ë‚´ìš©ì— ëŒ€í•œ í”„ë¡¬í”„íŠ¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”"
                            ></textarea>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">í…ìŠ¤íŠ¸ ëª¨ë¸</label>
                            <select id="textModel" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                                <option value="gemini-1.0-flash">Gemini 1.0 Flash</option>
                                <option value="gemini-1.5-pro">Gemini 1.5 Pro</option>
                                <option value="gpt-3.5-turbo">GPT-3.5 Turbo</option>
                                <option value="gpt-4">GPT-4</option>
                            </select>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">ëª©í‘œ í† í° ìˆ˜</label>
                            <input
                                type="number"
                                id="targetTokens"
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg"
                                value="1200"
                                min="500"
                                max="5000"
                            >
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">ì´ë¯¸ì§€ ìƒì„± ìˆ˜</label>
                            <input
                                type="number"
                                id="imageCount"
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg"
                                value="3"
                                min="0"
                                max="10"
                            >
                        </div>

                        <div>
                            <label class="flex items-center">
                                <input type="checkbox" id="enableFinishing" class="mr-2">
                                <span>í›„ê°€ê³µ ì²˜ë¦¬ í™œì„±í™”</span>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- ë¹„ìš© í‘œì‹œ -->
                <div class="bg-white rounded-xl shadow-lg p-6 card-hover">
                    <h4 class="text-lg font-bold mb-3">ğŸ’° ì˜ˆìƒ ë¹„ìš©</h4>
                    <div class="space-y-2">
                        <div class="flex justify-between">
                            <span>í…ìŠ¤íŠ¸ ìƒì„±:</span>
                            <span id="textCost" class="font-semibold">$0.00</span>
                        </div>
                        <div class="flex justify-between">
                            <span>ì´ë¯¸ì§€ ìƒì„±:</span>
                            <span id="imageCost" class="font-semibold">$0.00</span>
                        </div>
                        <div class="border-t pt-2">
                            <div class="flex justify-between font-bold">
                                <span>ì´í•©:</span>
                                <span id="totalCost" class="text-blue-600">$0.00</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ìƒì„± ë²„íŠ¼ -->
                <button id="generateBtn" class="w-full bg-gradient-to-r from-blue-500 to-purple-600 text-white px-6 py-4 rounded-xl font-bold text-lg hover:shadow-xl transition mt-6">
                    <i class="fas fa-magic mr-2"></i>ë¸”ë¡œê·¸ ìƒì„±í•˜ê¸°
                </button>
            </div>

            <!-- ì¤‘ì•™: ê²°ê³¼ íŒ¨ë„ -->
            <div class="lg:col-span-2">
                <div class="bg-white rounded-xl shadow-lg p-6 card-hover">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-2xl font-bold">ğŸ“„ ìƒì„± ê²°ê³¼</h3>
                        <div id="statusIndicator" class="hidden">
                            <span class="loading-spinner inline-block w-4 h-4 border-2 border-blue-500 border-t-transparent rounded-full mr-2"></span>
                            <span id="statusText">ìƒì„± ì¤‘...</span>
                        </div>
                    </div>

                    <!-- ë¡œë”© ìƒíƒœ -->
                    <div id="loadingState" class="hidden">
                        <div class="text-center py-12">
                            <div class="inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"></div>
                            <p class="mt-4 text-gray-600">AIê°€ ë¸”ë¡œê·¸ ì½˜í…ì¸ ë¥¼ ìƒì„±í•˜ê³  ìˆìŠµë‹ˆë‹¤...</p>
                        </div>
                    </div>

                    <!-- ê²°ê³¼ í‘œì‹œ -->
                    <div id="resultDisplay" class="hidden">
                        <!-- ì œëª© í¸ì§‘ -->
                        <div class="mb-6">
                            <label class="block text-sm font-medium text-gray-700 mb-2">ë¸”ë¡œê·¸ ì œëª©</label>
                            <input
                                type="text"
                                id="editTitle"
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"
                            >
                        </div>

                        <!-- ë‚´ìš© í¸ì§‘ -->
                        <div class="mb-6">
                            <label class="block text-sm font-medium text-gray-700 mb-2">ë¸”ë¡œê·¸ ë‚´ìš©</label>
                            <div id="editor" style="height: 400px;"></div>
                        </div>

                        <!-- ì´ë¯¸ì§€ -->
                        <div class="mb-6">
                            <label class="block text-sm font-medium text-gray-700 mb-2">ìƒì„±ëœ ì´ë¯¸ì§€</label>
                            <div id="generatedImages" class="grid grid-cols-3 gap-4">
                                <!-- ì´ë¯¸ì§€ê°€ ì—¬ê¸°ì— í‘œì‹œë¨ -->
                            </div>
                        </div>

                        <!-- ì‘ì—… ë²„íŠ¼ -->
                        <div class="flex space-x-3">
                            <button id="previewBtn" class="flex-1 bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition">
                                <i class="fas fa-eye mr-2"></i>ë¯¸ë¦¬ë³´ê¸°
                            </button>
                            <button id="saveBtn" class="flex-1 bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition">
                                <i class="fas fa-save mr-2"></i>ì €ì¥
                            </button>
                            <button id="publishBtn" class="flex-1 bg-purple-500 text-white px-4 py-2 rounded-lg hover:bg-purple-600 transition">
                                <i class="fas fa-upload mr-2"></i>ê²Œì‹œ
                            </button>
                        </div>
                    </div>

                    <!-- ì´ˆê¸° ìƒíƒœ -->
                    <div id="initialState">
                        <div class="text-center py-12 text-gray-500">
                            <i class="fas fa-blog text-6xl mb-4"></i>
                            <p>ë¸”ë¡œê·¸ ìƒì„± ë²„íŠ¼ì„ ëˆŒëŸ¬ ì‹œì‘í•˜ì„¸ìš”</p>
                        </div>
                    </div>

                    <!-- ë¯¸ë¦¬ë³´ê¸° ëª¨ë‹¬ -->
                    <div id="previewModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
                        <div class="bg-white rounded-xl max-w-4xl w-full max-h-screen overflow-y-auto p-8">
                            <div class="flex justify-between items-center mb-6">
                                <h3 class="text-2xl font-bold">ğŸ“– ë¸”ë¡œê·¸ ë¯¸ë¦¬ë³´ê¸°</h3>
                                <button id="closePreview" class="text-gray-500 hover:text-gray-700">
                                    <i class="fas fa-times text-xl"></i>
                                </button>
                            </div>
                            <div id="previewContent" class="prose max-w-none">
                                <!-- ë¯¸ë¦¬ë³´ê¸° ë‚´ìš©ì´ ì—¬ê¸°ì— í‘œì‹œë¨ -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- íˆìŠ¤í† ë¦¬ -->
                <div class="bg-white rounded-xl shadow-lg p-6 card-hover mt-6">
                    <h3 class="text-xl font-bold mb-4">ğŸ“š ìƒì„± íˆìŠ¤í† ë¦¬</h3>
                    <div id="historyList" class="space-y-3">
                        <div class="text-center py-8 text-gray-500">
                            <p>ìƒì„± íˆìŠ¤í† ë¦¬ê°€ ì—†ìŠµë‹ˆë‹¤</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ë„¤ë¹„ê²Œì´ì…˜ ë¡œë“œ ìŠ¤í¬ë¦½íŠ¸ -->
    <script src="../script.js"></script>

    <script>
        // ìë™ ë¸”ë¡œê·¸ ìƒì„±ê¸° í´ë˜ìŠ¤
        class AutoBlogGenerator {
            constructor() {
                this.quill = null;
                this.history = [];
                this.currentResult = null;
                this.initializeElements();
                this.initializeEditor();
                this.bindEvents();
                this.loadHistory();
            }

            initializeElements() {
                this.elements = {
                    blogTitle: document.getElementById('blogTitle'),
                    category: document.getElementById('category'),
                    keywords: document.getElementById('keywords'),
                    prompt: document.getElementById('prompt'),
                    textModel: document.getElementById('textModel'),
                    targetTokens: document.getElementById('targetTokens'),
                    imageCount: document.getElementById('imageCount'),
                    enableFinishing: document.getElementById('enableFinishing'),
                    generateBtn: document.getElementById('generateBtn'),
                    loadingState: document.getElementById('loadingState'),
                    resultDisplay: document.getElementById('resultDisplay'),
                    initialState: document.getElementById('initialState'),
                    statusIndicator: document.getElementById('statusIndicator'),
                    statusText: document.getElementById('statusText'),
                    editTitle: document.getElementById('editTitle'),
                    generatedImages: document.getElementById('generatedImages'),
                    previewBtn: document.getElementById('previewBtn'),
                    saveBtn: document.getElementById('saveBtn'),
                    publishBtn: document.getElementById('publishBtn'),
                    previewModal: document.getElementById('previewModal'),
                    previewContent: document.getElementById('previewContent'),
                    closePreview: document.getElementById('closePreview'),
                    historyList: document.getElementById('historyList'),
                    textCost: document.getElementById('textCost'),
                    imageCost: document.getElementById('imageCost'),
                    totalCost: document.getElementById('totalCost')
                };
            }

            initializeEditor() {
                this.quill = new Quill('#editor', {
                    theme: 'snow',
                    placeholder: 'ë¸”ë¡œê·¸ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”...',
                    modules: {
                        toolbar: [
                            [{ 'header': [1, 2, 3, false] }],
                            ['bold', 'italic', 'underline', 'strike'],
                            ['blockquote', 'code-block'],
                            [{ 'list': 'ordered'}, { 'list': 'bullet' }],
                            [{ 'script': 'sub'}, { 'script': 'super' }],
                            [{ 'indent': '-1'}, { 'indent': '+1' }],
                            ['link', 'image'],
                            ['clean']
                        ]
                    }
                });
            }

            bindEvents() {
                // ëª¨ë“œ ë³€ê²½
                document.querySelectorAll('input[name="mode"]').forEach(radio => {
                    radio.addEventListener('change', (e) => {
                        if (e.target.value === 'keywords') {
                            this.elements.keywordsSection.classList.remove('hidden');
                            this.elements.promptSection.classList.add('hidden');
                        } else {
                            this.elements.keywordsSection.classList.add('hidden');
                            this.elements.promptSection.classList.remove('hidden');
                        }
                    });
                });

                // ë¹„ìš© ê³„ì‚°
                ['targetTokens', 'imageCount', 'textModel'].forEach(id => {
                    this.elements[id].addEventListener('change', () => this.updateCost());
                });

                // ìƒì„± ë²„íŠ¼
                this.elements.generateBtn.addEventListener('click', () => this.generateBlog());

                // ë¯¸ë¦¬ë³´ê¸°
                this.elements.previewBtn.addEventListener('click', () => this.showPreview());

                // ì €ì¥
                this.elements.saveBtn.addEventListener('click', () => this.saveBlog());

                // ê²Œì‹œ
                this.elements.publishBtn.addEventListener('click', () => this.publishBlog());

                // ë¯¸ë¦¬ë³´ê¸° ë‹«ê¸°
                this.elements.closePreview.addEventListener('click', () => {
                    this.elements.previewModal.classList.add('hidden');
                });

                // ì´ˆê¸° ë¹„ìš© ê³„ì‚°
                this.updateCost();
            }

            updateCost() {
                const tokens = parseInt(this.elements.targetTokens.value);
                const imageCount = parseInt(this.elements.imageCount.value);
                const model = this.elements.textModel.value;

                // ê°„ë‹¨í•œ ë¹„ìš© ê³„ì‚° (ì‹¤ì œë¡œëŠ” API ê¸°ë°˜ ê³„ì‚° í•„ìš”)
                const textCost = (tokens / 1000) * 0.002; // $0.002 per 1K tokens
                const imageCost = imageCount * 0.02; // $0.02 per image

                this.elements.textCost.textContent = `$${textCost.toFixed(4)}`;
                this.elements.imageCost.textContent = `$${imageCost.toFixed(4)}`;
                this.elements.totalCost.textContent = `$${(textCost + imageCost).toFixed(4)}`;
            }

            async generateBlog() {
                const mode = document.querySelector('input[name="mode"]:checked').value;
                const inputData = mode === 'keywords' ?
                    this.elements.keywords.value :
                    this.elements.prompt.value;

                if (!inputData) {
                    alert(mode === 'keywords' ? 'í‚¤ì›Œë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.' : 'í”„ë¡¬í”„íŠ¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                    return;
                }

                // ë¡œë”© ìƒíƒœ í‘œì‹œ
                this.showLoading();
                this.elements.generateBtn.disabled = true;
                this.elements.generateBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>ìƒì„± ì¤‘...';

                try {
                    // 1. ë¸”ë¡œê·¸ ë‚´ìš© ìƒì„±
                    this.updateStatus('ë¸”ë¡œê·¸ ë‚´ìš© ìƒì„± ì¤‘...');
                    const content = await this.generateContent(inputData, mode);

                    // 2. ì´ë¯¸ì§€ ìƒì„±
                    this.updateStatus('ì´ë¯¸ì§€ ìƒì„± ì¤‘...');
                    const images = await this.generateImages(content, parseInt(this.elements.imageCount.value));

                    // ê²°ê³¼ ì €ì¥
                    this.currentResult = {
                        title: this.elements.blogTitle.value || this.generateTitle(inputData, mode),
                        content: content,
                        images: images,
                        metadata: {
                            category: this.elements.category.value,
                            mode: mode,
                            model: this.elements.textModel.value,
                            tokens: this.elements.targetTokens.value,
                            createdAt: new Date().toISOString()
                        }
                    };

                    // ê²°ê³¼ í‘œì‹œ
                    this.showResults();

                    // íˆìŠ¤í† ë¦¬ì— ì¶”ê°€
                    this.addToHistory({
                        topic: { title: this.currentResult.title },
                        result: { success: true, url: '#' },
                        duration: Math.random() * 10 + 5, // ì‹œë®¬ë ˆì´ì…˜
                        imagesGenerated: images.length,
                        timestamp: new Date().toLocaleString('ko-KR')
                    });

                } catch (error) {
                    console.error('ìƒì„± ì˜¤ë¥˜:', error);
                    alert('ë¸”ë¡œê·¸ ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                } finally {
                    this.hideLoading();
                    this.elements.generateBtn.disabled = false;
                    this.elements.generateBtn.innerHTML = '<i class="fas fa-magic mr-2"></i>ë¸”ë¡œê·¸ ìƒì„±í•˜ê¸°';
                }
            }

            async generateContent(inputData, mode) {
                // ê°„ë‹¨í•œ ë‚´ìš© ìƒì„± (ì‹¤ì œë¡œëŠ” AI API í˜¸ì¶œ)
                await new Promise(resolve => setTimeout(resolve, 2000));

                const templates = {
                    keywords: `# ${inputData}ì— ëŒ€í•œ ì™„ë²½í•œ ê°€ì´ë“œ

## ì„œë¡ 
í˜„ëŒ€ ì‚¬íšŒì—ì„œ ${inputData}ëŠ” ë§¤ìš° ì¤‘ìš”í•œ ì£¼ì œê°€ ë˜ì—ˆìŠµë‹ˆë‹¤. ë§ì€ ì‚¬ëŒë“¤ì´ ì´ ë¶„ì•¼ì— ëŒ€í•´ ê´€ì‹¬ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.

## ë³¸ë¬¸

### í•µì‹¬ ê°œë…
${inputData}ì˜ ê¸°ë³¸ ê°œë…ì„ ì´í•´í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤. ì´ëŠ” ë‹¤ë¥¸ ëª¨ë“  ë‚´ìš©ì˜ ê¸°ë°˜ì´ ë©ë‹ˆë‹¤.

### ì‹¤ì „ ì ìš©
ì´ë¡ ì„ ì‹¤ì œì— ì ìš©í•´ë³´ëŠ” ë‹¨ê³„ì…ë‹ˆë‹¤. ì‹¤ì œ ì‚¬ë¡€ì™€ ê²½í—˜ì„ í†µí•´ ê¹Šì´ ìˆëŠ” ì´í•´ë¥¼ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ì „ë¬¸ê°€ íŒ
ê²½í—˜ ë§ì€ ì „ë¬¸ê°€ë“¤ì˜ ì¡°ì–¸ì„ í†µí•´ ë” ë‚˜ì€ ê²°ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## ê²°ë¡ 
${inputData}ì— ëŒ€í•´ ì•Œì•„ë³¸ ë‚´ìš©ì„ ì •ë¦¬í•˜ë©° ë§ˆë¬´ë¦¬í•©ë‹ˆë‹¤. ê¾¸ì¤€í•œ ì—°ìŠµê³¼ í•™ìŠµì´ ì¤‘ìš”í•©ë‹ˆë‹¤.`,

                    prompt: `# ${inputData}

## ìƒì„±ëœ ë‚´ìš©

í”„ë¡¬í”„íŠ¸ë¥¼ ë°”íƒ•ìœ¼ë¡œ ìƒì„±ëœ ìƒì„¸í•œ ë‚´ìš©ì…ë‹ˆë‹¤. ê° ì„¹ì…˜ì€ ë…ìì˜ ì´í•´ë¥¼ ë•ê¸° ìœ„í•´ ì²´ê³„ì ìœ¼ë¡œ êµ¬ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.

### ì‹¬í™” ë¶„ì„
ì£¼ì œì— ëŒ€í•œ ê¹Šì´ ìˆëŠ” ë¶„ì„ê³¼ í†µì°°ì„ ì œê³µí•©ë‹ˆë‹¤.

### ì‹¤ìš©ì  ê°€ì´ë“œ
ë…ìê°€ ë°”ë¡œ ì ìš©í•  ìˆ˜ ìˆëŠ” ì‹¤ìš©ì ì¸ ì •ë³´ì™€ ë°©ë²•ì„ ì œì‹œí•©ë‹ˆë‹¤.`
                };

                return templates[mode] || templates.keywords;
            }

            async generateImages(content, count) {
                // ê°„ë‹¨í•œ ì´ë¯¸ì§€ ìƒì„± (ì‹¤ì œë¡œëŠ” AI ì´ë¯¸ì§€ API í˜¸ì¶œ)
                await new Promise(resolve => setTimeout(resolve, 1000));

                const imageKeywords = ['ê°œë…', 'ì‹¤ì „', 'ê°€ì´ë“œ', 'ê²°ê³¼', 'íŒ'];
                return Array.from({ length: Math.min(count, imageKeywords.length) }, (_, i) => ({
                    id: i + 1,
                    url: `https://picsum.photos/seed/${imageKeywords[i]}${Date.now()}/400/300.jpg`,
                    alt: `${imageKeywords[i]} ê´€ë ¨ ì´ë¯¸ì§€`
                }));
            }

            generateTitle(inputData, mode) {
                const templates = {
                    keywords: `${inputData}: ì™„ë²½í•œ ê°€ì´ë“œ 2024`,
                    prompt: `${inputData}: ì‹¬ì¸µ ë¶„ì„ê³¼ ì‹¤ìš© ê°€ì´ë“œ`
                };
                return templates[mode] || templates.keywords;
            }

            showLoading() {
                this.elements.initialState.classList.add('hidden');
                this.elements.resultDisplay.classList.add('hidden');
                this.elements.loadingState.classList.remove('hidden');
                this.elements.statusIndicator.classList.remove('hidden');
            }

            hideLoading() {
                this.elements.loadingState.classList.add('hidden');
                this.elements.statusIndicator.classList.add('hidden');
            }

            updateStatus(text) {
                this.elements.statusText.textContent = text;
            }

            showResults() {
                this.hideLoading();
                this.elements.resultDisplay.classList.remove('hidden');

                // ì œëª© ì„¤ì •
                this.elements.editTitle.value = this.currentResult.title;

                // ë‚´ìš© ì„¤ì •
                this.quill.root.innerHTML = this.currentResult.content.replace(/\n/g, '<br>');

                // ì´ë¯¸ì§€ í‘œì‹œ
                this.elements.generatedImages.innerHTML = this.currentResult.images.map(img => `
                    <div class="relative group">
                        <img src="${img.url}" alt="${img.alt}" class="w-full h-40 object-cover rounded-lg">
                        <div class="absolute inset-0 bg-black bg-opacity-50 opacity-0 group-hover:opacity-100 transition-opacity rounded-lg flex items-center justify-center">
                            <button class="text-white bg-blue-500 px-3 py-1 rounded text-sm">ë³´ê¸°</button>
                        </div>
                    </div>
                `).join('');
            }

            showPreview() {
                if (!this.currentResult) return;

                const html = marked(this.quill.root.textContent);
                this.elements.previewContent.innerHTML = `
                    <h1 class="text-3xl font-bold mb-4">${this.currentResult.title}</h1>
                    <div class="text-gray-600 mb-6">
                        ì¹´í…Œê³ ë¦¬: ${this.currentResult.metadata.category} |
                        ìƒì„± ì‹œê°„: ${new Date(this.currentResult.metadata.createdAt).toLocaleString('ko-KR')}
                    </div>
                    <div>${html}</div>
                    ${this.currentResult.images.length > 0 ? `
                        <h3 class="text-xl font-bold mt-6 mb-4">ê´€ë ¨ ì´ë¯¸ì§€</h3>
                        <div class="grid grid-cols-3 gap-4">
                            ${this.currentResult.images.map(img => `
                                <img src="${img.url}" alt="${img.alt}" class="w-full h-32 object-cover rounded-lg">
                            `).join('')}
                        </div>
                    ` : ''}
                `;

                this.elements.previewModal.classList.remove('hidden');
            }

            saveBlog() {
                if (!this.currentResult) return;

                const blogData = {
                    ...this.currentResult,
                    title: this.elements.editTitle.value,
                    content: this.quill.root.innerHTML,
                    status: 'draft'
                };

                // localStorageì— ì €ì¥ (ì‹¤ì œë¡œëŠ” ì„œë²„ API í˜¸ì¶œ)
                const savedBlogs = JSON.parse(localStorage.getItem('savedBlogs') || '[]');
                savedBlogs.push({ ...blogData, id: Date.now() });
                localStorage.setItem('savedBlogs', JSON.stringify(savedBlogs));

                alert('ë¸”ë¡œê·¸ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!');
            }

            publishBlog() {
                if (!this.currentResult) return;

                if (confirm('ì´ ë¸”ë¡œê·¸ë¥¼ ê²Œì‹œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                    // ì‹¤ì œë¡œëŠ” ì„œë²„ API í˜¸ì¶œ
                    alert('ë¸”ë¡œê·¸ê°€ ì„±ê³µì ìœ¼ë¡œ ê²Œì‹œë˜ì—ˆìŠµë‹ˆë‹¤!');
                }
            }

            addToHistory(item) {
                this.history.unshift(item);
                if (this.history.length > 10) {
                    this.history = this.history.slice(0, 10);
                }
                this.updateHistoryDisplay();
                localStorage.setItem('blogHistory', JSON.stringify(this.history));
            }

            loadHistory() {
                const saved = localStorage.getItem('blogHistory');
                if (saved) {
                    this.history = JSON.parse(saved);
                    this.updateHistoryDisplay();
                }
            }

            updateHistoryDisplay() {
                if (this.history.length === 0) {
                    this.elements.historyList.innerHTML = `
                        <div class="text-center py-8 text-gray-500">
                            <p>ìƒì„± íˆìŠ¤í† ë¦¬ê°€ ì—†ìŠµë‹ˆë‹¤</p>
                        </div>
                    `;
                    return;
                }

                this.elements.historyList.innerHTML = this.history.map(item => `
                    <div class="border rounded-lg p-4 hover:bg-gray-50 transition">
                        <div class="flex justify-between items-start mb-2">
                            <h4 class="font-semibold">${item.topic.title}</h4>
                            <span class="text-xs text-gray-500">${item.timestamp}</span>
                        </div>
                        <div class="text-sm text-gray-600">
                            <span class="mr-4">â±ï¸ ${item.duration.toFixed(1)}s</span>
                            <span class="mr-4">ğŸ–¼ï¸ ${item.imagesGenerated}ê°œ</span>
                            <span class="${item.result.success ? 'text-green-600' : 'text-red-600'}">
                                ${item.result.success ? 'âœ… ì„±ê³µ' : 'âŒ ì‹¤íŒ¨'}
                            </span>
                        </div>
                    </div>
                `).join('');
            }
        }

        // ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', () => {
            new AutoBlogGenerator();
        });
    </script>
</body>
</html>